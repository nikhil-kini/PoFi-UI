"use strict";(self.webpackChunkpokerfriend_UI=self.webpackChunkpokerfriend_UI||[]).push([[730],{1007:(Or,pt,z)=>{z.d(pt,{A:()=>ed});var he={};z.r(he),z.d(he,{AuthError:()=>y,autoSignIn:()=>En,confirmResetPassword:()=>tu,confirmSignIn:()=>ru,confirmSignUp:()=>ou,confirmUserAttribute:()=>hu,decodeJWT:()=>X,deleteUser:()=>Gu,deleteUserAttributes:()=>ju,fetchAuthSession:()=>$,fetchDevices:()=>Zu,fetchMFAPreference:()=>su,fetchUserAttributes:()=>Ku,forgetDevice:()=>Ju,getCurrentUser:()=>ue,rememberDevice:()=>Yu,resendSignUpCode:()=>nu,resetPassword:()=>eu,sendUserAttributeVerificationCode:()=>$u,setUpTOTP:()=>uu,signIn:()=>mn,signInWithRedirect:()=>Pu,signOut:()=>Tr,signUp:()=>Qc,updateMFAPreference:()=>iu,updatePassword:()=>cu,updateUserAttribute:()=>fu,updateUserAttributes:()=>fr,verifyTOTPSetup:()=>au});var pe=z(5879),qe=z(5619);function we(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(o,r)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function s(c){we(i,o,r,s,a,"next",c)}function a(c){we(i,o,r,s,a,"throw",c)}s(void 0)})}}function Pe({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class gt{constructor(){}configure(t,n){this.authConfig=t,this.authOptions=n}fetchAuthSession(t={}){var n=this;return d(function*(){let o,r,i;return o=yield n.getTokens(t),o?(i=o.accessToken?.payload?.sub,r=yield n.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:n.authConfig,tokens:o,authenticated:!0,forceRefresh:t.forceRefresh})):r=yield n.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:n.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:o,credentials:r?.credentials,identityId:r?.identityId,userSub:i}})()}clearCredentials(){var t=this;return d(function*(){if(t.authOptions?.credentialsProvider)return yield t.authOptions.credentialsProvider.clearCredentialsAndIdentityId()})()}getTokens(t){var n=this;return d(function*(){return(yield n.authOptions?.tokenProvider?.getTokens(t))??void 0})()}}var B=function(e){return e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e}(B||{});const ro="x-amz-user-agent",io={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};let de=(()=>{class e{constructor(n,o=B.WARN){this.name=n,this.level=o,this._pluggables=[]}_padding(n){return n<10?"0"+n:""+n}_ts(){const n=new Date;return[this._padding(n.getMinutes()),this._padding(n.getSeconds())].join(":")+"."+n.getMilliseconds()}configure(n){return n?(this._config=n,this._config):this._config}_log(n,...o){let r=this.level;if(e.LOG_LEVEL&&(r=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL),!(io[n]>=io[r]))return;let a=console.log.bind(console);n===B.ERROR&&console.error&&(a=console.error.bind(console)),n===B.WARN&&console.warn&&(a=console.warn.bind(console));const c=`[${n}] ${this._ts()} ${this.name}`;let u="";if(1===o.length&&"string"==typeof o[0])u=`${c} - ${o[0]}`,a(u);else if(1===o.length)u=`${c} ${o[0]}`,a(c,o[0]);else if("string"==typeof o[0]){let l=o.slice(1);1===l.length&&(l=l[0]),u=`${c} - ${o[0]} ${l}`,a(`${c} - ${o[0]}`,l)}else u=`${c} ${o}`,a(c,o);for(const l of this._pluggables){const f={message:u,timestamp:Date.now()};l.pushLogs([f])}}log(...n){this._log(B.INFO,...n)}info(...n){this._log(B.INFO,...n)}warn(...n){this._log(B.WARN,...n)}error(...n){this._log(B.ERROR,...n)}debug(...n){this._log(B.DEBUG,...n)}verbose(...n){this._log(B.VERBOSE,...n)}addPluggable(n){n&&"Logging"===n.getCategoryName()&&(this._pluggables.push(n),n.configure(this._config))}listPluggables(){return this._pluggables}}return e.LOG_LEVEL=null,e})();class J extends Error{constructor({message:t,name:n,recoverySuggestion:o,underlyingError:r}){super(t),this.name=n,this.underlyingError=r,this.recoverySuggestion=o,this.constructor=J,Object.setPrototypeOf(this,J.prototype)}}const W=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Ne=new de("Hub");class so{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const o=this.listeners.get(t);o?this.listeners.set(t,[...o.filter(({callback:r})=>r!==n)]):Ne.warn(`No listeners for ${t}`)}dispatch(t,n,o,r){"string"==typeof t&&this.protectedChannels.indexOf(t)>-1&&(r===W||Ne.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const i={channel:t,payload:{...n},source:o,patternInfo:[]};try{this._toListeners(i)}catch(s){Ne.error(s)}}listen(t,n,o="noname"){let r;if("function"!=typeof n)throw new J({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});r=n;let i=this.listeners.get(t);return i||(i=[],this.listeners.set(t,i)),i.push({name:o,callback:r}),()=>{this._remove(t,r)}}_toListeners(t){const{channel:n,payload:o}=t,r=this.listeners.get(n);r&&r.forEach(i=>{Ne.debug(`Dispatching to ${n} with `,o);try{i.callback(t)}catch(s){Ne.error(s)}})}}const V=new so("__default__"),He=new so("internal-hub"),kr=new de("parseAWSExports"),Lr={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",LAMBDA:"lambda"},ao=(e={})=>{const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:r,aws_bots_config:s,aws_cognito_identity_pool_id:a,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:l,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:h,aws_cognito_signup_attributes:g,aws_cognito_social_providers:v,aws_cognito_username_attributes:x,aws_mandatory_sign_in:R,aws_mobile_analytics_app_id:T,aws_mobile_analytics_app_region:Y,aws_user_files_s3_bucket:ee,aws_user_files_s3_bucket_region:Re,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:Qn,aws_user_pools_id:wr,aws_user_pools_web_client_id:nd,geo:eo,oauth:to,predictions:Te,aws_cloud_logic_custom:Pr,Notifications:od,modelIntrospection:Nr}=e,K={};T&&(K.Analytics={Pinpoint:{appId:T,region:Y}});const{InAppMessaging:no,Push:oo}=od??{};if(no?.AWSPinpoint||oo?.AWSPinpoint){if(no?.AWSPinpoint){const{appId:D,region:Ve}=no.AWSPinpoint;K.Notifications={InAppMessaging:{Pinpoint:{appId:D,region:Ve}}}}if(oo?.AWSPinpoint){const{appId:D,region:Ve}=oo.AWSPinpoint;K.Notifications={PushNotification:{Pinpoint:{appId:D,region:Ve}}}}}if(Array.isArray(s)&&(K.Interactions={LexV1:Object.fromEntries(s.map(D=>[D.name,D]))}),o){const D=Lr[n];D||kr.debug(`Invalid authentication type ${n}. Falling back to IAM.`),K.API={GraphQL:{endpoint:o,apiKey:t,region:r,defaultAuthMode:D??"iam"}},Nr&&(K.API.GraphQL.modelIntrospection=Nr)}const rd=u?{status:u&&u.toLowerCase(),totpEnabled:l?.includes("TOTP")??!1,smsEnabled:l?.includes("SMS")??!1}:void 0,id=f?{minLength:f.passwordPolicyMinLength,requireLowercase:f.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:f.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:f.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:f.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,sd=Array.from(new Set([...h??[],...g??[]])).map(D=>({[D.toLowerCase()]:{required:!0}})),Ur=x?.includes("EMAIL")??!1,br=x?.includes("PHONE_NUMBER")??!1;(a||wr)&&(K.Auth={Cognito:{identityPoolId:a,allowGuestAccess:"enable"!==R,signUpVerificationMethod:c,userAttributes:sd,userPoolClientId:nd,userPoolId:wr,mfa:rd,passwordFormat:id,loginWith:{username:!(Ur||br),email:Ur,phone:br}}});const ad=!!to&&Object.keys(to).length>0,cd=!!v&&v.length>0;if(K.Auth&&ad&&(K.Auth.Cognito.loginWith={...K.Auth.Cognito.loginWith,oauth:{...Kr(to),...cd&&{providers:Br(v)}}}),ee&&(K.Storage={S3:{bucket:ee,region:Re,dangerouslyConnectToHttpEndpointForTesting:Qn}}),eo){const{amazon_location_service:D}=eo;K.Geo=D?{LocationService:{...D,searchIndices:D.search_indices,region:D.region}}:{...eo}}if(Pr&&(K.API={...K.API,REST:Pr.reduce((D,Ve)=>{const{name:ud,endpoint:dd,region:Mr,service:Dr}=Ve;return{...D,[ud]:{endpoint:dd,...Dr?{service:Dr}:void 0,...Mr?{region:Mr}:void 0}}},{})}),Te){const{VoiceId:D}=Te?.convert?.speechGenerator?.defaults??{};K.Predictions=D?{...Te,convert:{...Te.convert,speechGenerator:{...Te.convert.speechGenerator,defaults:{voiceId:D}}}}:Te}return K},co=e=>e?.split(",")??[],Kr=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:r})=>({domain:e,scopes:t,redirectSignIn:co(n),redirectSignOut:co(o),responseType:r}),Br=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),uo=e=>{const t=Reflect.ownKeys(e);for(const n of t){const o=e[n];(o&&"object"==typeof o||"function"==typeof o)&&uo(o)}return Object.freeze(e)},I=new class Wr{constructor(){this.resourcesConfig={},this.libraryOptions={},this.Auth=new gt}configure(t,n){let o;o=Object.keys(t).some(r=>r.startsWith("aws_"))?ao(t):t,this.resourcesConfig=o,n&&(this.libraryOptions=n),this.resourcesConfig=uo(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),V.dispatch("core",{event:"configure",data:t},"Configure",W)}getConfig(){return this.resourcesConfig}};function ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var $e=function yt(e,t){function n(r,i,s){if(!(typeof document>"u")){"number"==typeof(s=ze({},t,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in s)s[c]&&(a+="; "+c,!0!==s[c]&&(a+="="+s[c].split(";")[0]));return document.cookie=r+"="+e.write(i,r)+a}}return Object.create({set:n,get:function o(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var i=document.cookie?document.cookie.split("; "):[],s={},a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(s[l]=e.read(u,l),r===l)break}catch{}}return r?s[r]:s}},remove:function(r,i){n(r,"",ze({},i,{expires:-1}))},withAttributes:function(r){return yt(this.converter,ze({},this.attributes,r))},withConverter:function(r){return yt(ze({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class lo{constructor(t={}){const{path:n,domain:o,expires:r,sameSite:i,secure:s}=t;if(this.domain=o,this.path=n||"/",this.expires=t.hasOwnProperty("expires")?r:365,this.secure=!t.hasOwnProperty("secure")||s,t.hasOwnProperty("sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}setItem(t,n){var o=this;return d(function*(){$e.set(t,n,o.getData())})()}getItem(t){return d(function*(){return $e.get(t)??null})()}removeItem(t){var n=this;return d(function*(){$e.remove(t,n.getData())})()}clear(){var t=this;return d(function*(){const n=$e.get(),o=Object.keys(n).map(r=>t.removeItem(r));yield Promise.all(o)})()}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var Et=function(e){return e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e}(Et||{});class je extends J{constructor(){super({name:Et.PlatformNotSupported,message:"Function not supported on current platform"})}}class It{constructor(t){this.storage=t}setItem(t,n){var o=this;return d(function*(){if(!o.storage)throw new je;o.storage.setItem(t,n)})()}getItem(t){var n=this;return d(function*(){if(!n.storage)throw new je;return n.storage.getItem(t)})()}removeItem(t){var n=this;return d(function*(){if(!n.storage)throw new je;n.storage.removeItem(t)})()}clear(){var t=this;return d(function*(){if(!t.storage)throw new je;t.storage.clear()})()}}class St{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const ge=new class zr extends It{constructor(){super(typeof window<"u"&&window.localStorage?window.localStorage:new St)}},fo=(new class $r extends It{constructor(){super(typeof window<"u"&&window.sessionStorage?window.sessionStorage:new St)}},new It(new St),(e,t=J)=>(n,o,r)=>{const{message:i,recoverySuggestion:s}=e[o];if(!n)throw new t({name:o,message:r?`${i} ${r}`:i,recoverySuggestion:s})});var te=function(e){return e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException",e}(te||{});const Ct=fo({[te.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[te.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[te.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[te.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[te.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}}),ho=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new J({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},po={convert:e=>(()=>{if(typeof window<"u"&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new J({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(e)};function m(e){let t=!0;return t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,Ct(t,te.AuthUserPoolException)}function Ge(e){return Ct(!!(e?.loginWith?.oauth?.domain&&e?.loginWith?.oauth?.redirectSignOut&&e?.loginWith?.oauth?.redirectSignIn&&e?.loginWith?.oauth?.responseType),te.OAuthNotConfigureException)}function Ye(e){return Ct(!!e?.identityPoolId,te.InvalidIdentityPoolIdException)}function X(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(po.convert(o).split("").map(s=>`%${`00${s.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return{toString:()=>e,payload:JSON.parse(r)}}catch{throw new Error("Invalid token payload")}}const A=(e,t,n,o)=>function(){var r=d(function*(i,s){const a={...o,...i},c=yield a.endpointResolver(a,s),u=yield t(s,c),l=yield e(u,{...a});return yield n(l)});return function(i,s){return r.apply(this,arguments)}}(),go={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Jr={partitions:[go,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},mo=e=>{const{partitions:t}=Jr;for(const{regions:n,outputs:o,regionRegex:r}of t){const i=new RegExp(r);if(n.includes(e)||i.test(e))return o.dnsSuffix}return go.outputs.dnsSuffix},Qr=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,o;const r=new Promise(i=>{o=i,n=setTimeout(i,e)});return t?.addEventListener("abort",function i(s){clearTimeout(n),t?.removeEventListener("abort",i),o()}),r},yo=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},_t=(e,t)=>(n,o)=>{const r={};let i=s=>e(s,o);for(let s=t.length-1;s>=0;s--)i=(0,t[s])(o)(i,r);return i(n)},vt=e=>{let t;return()=>(t||(t=e()),t)},ti=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Eo=_t(function(){var e=d(function*({url:t,method:n,headers:o,body:r},{abortSignal:i,cache:s,withCrossDomainCredentials:a}){let c;try{c=yield fetch(t,{method:n,headers:o,body:ti(n)?r:void 0,signal:i,cache:s,credentials:a?"include":"same-origin"})}catch(h){throw h instanceof TypeError?new Error("Network error"):h}const u={};return c.headers?.forEach((h,g)=>{u[g.toLowerCase()]=h}),{statusCode:c.status,headers:u,body:null,body:Object.assign(c.body??{},{text:vt(()=>c.text()),blob:vt(()=>c.blob()),json:vt(()=>c.json())})}});return function(n,o){return e.apply(this,arguments)}}(),[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>function(){var o=d(function*(i){if(0===t.trim().length)return yield n(i);{const s=e.toLowerCase();return i.headers[s]=i.headers[s]?`${i.headers[s]} ${t}`:t,yield n(i)}});return function r(i){return o.apply(this,arguments)}}(),({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(r,i)=>function(){var s=d(function*(c){let u,f,l=i.attemptsCount??0;const h=()=>{if(f)return yo(f,l),f;throw yo(u,l),u};for(;!o?.aborted&&l<e;){try{f=yield r(c),u=void 0}catch(g){u=g,f=void 0}if(l=(i.attemptsCount??0)>l?i.attemptsCount??0:l+1,i.attemptsCount=l,!(yield t(f,u)))return h();if(!o?.aborted&&l<e){const g=n(l);yield Qr(g,o)}}if(o?.aborted)throw new Error("Request aborted.");return h()});return function a(c){return s.apply(this,arguments)}}()}]),ni=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Io=e=>function(){var t=d(function*(n,o){const i=(o??(yield e(n))??void 0)?.code,s=n?.statusCode;return ai(o)||si(s,i)||(e=>!!e&&ni.includes(e))(i)||ci(s,i)});return function(n,o){return t.apply(this,arguments)}}(),ri=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ii=["TimeoutError","RequestTimeout","RequestTimeoutException"],si=(e,t)=>429===e||!!t&&ri.includes(t),ai=e=>"Network error"===e?.name,ci=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ii.includes(t),Je=e=>{const{headers:t,statusCode:n}=e;return{...ui(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},ui=e=>"object"==typeof e?.$metadata,me=function(){var e=d(function*(t){if(!t||t.statusCode<300)return;const n=yield Xe(t),r=(a=>{const[c]=a.toString().split(/[\,\:]+/);return c.includes("#")?c.split("#")[1]:c})(t.headers["x-amzn-errortype"]??n.code??n.__type??"UnknownError"),s=new Error(n.message??n.Message??"Unknown error");return Object.assign(s,{name:r,$metadata:Je(t)})});return function(n){return e.apply(this,arguments)}}(),Xe=function(){var e=d(function*(t){if(!t.body)throw new Error("Missing response payload");const n=yield t.body.json();return Object.assign(n,{$metadata:Je(t)})});return function(n){return e.apply(this,arguments)}}(),Co=e=>{const n=function li(e=3e5){return o=>{const r=2**o*100+100*Math.random();return!(r>e)&&r}}(3e5)(e);return!1===n?3e5:n},le=URL;var b=function(e){return e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202",e}(b||{}),_o=function(e){return e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage",e}(_o||{}),C=function(e){return e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e}(C||{});const Ze=()=>typeof global<"u",ye=()=>typeof window<"u",xo=()=>typeof document<"u",xt=()=>typeof process<"u",Ue=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t)),ki=[{platform:b.Expo,detectionMethod:function Oi(){return Ze()&&typeof global.expo<"u"}},{platform:b.ReactNative,detectionMethod:function Di(){return typeof navigator<"u"&&typeof navigator.product<"u"&&"ReactNative"===navigator.product}},{platform:b.NextJs,detectionMethod:function wi(){return ye()&&window.next&&"object"==typeof window.next}},{platform:b.Nuxt,detectionMethod:function Ni(){return ye()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:b.Angular,detectionMethod:function bi(){const e=!(!xo()||!document.querySelector("[ng-version]")),t=!!(ye()&&typeof window.ng<"u");return e||t}},{platform:b.React,detectionMethod:function _i(){const e=o=>o.startsWith("_react")||o.startsWith("__react");return xo()&&Array.from(document.querySelectorAll("[id]")).some(o=>Object.keys(o).find(e))}},{platform:b.VueJs,detectionMethod:function xi(){return ye()&&Ue(window,"__VUE")}},{platform:b.Svelte,detectionMethod:function Ri(){return ye()&&Ue(window,"__SVELTE")}},{platform:b.WebUnknown,detectionMethod:function Fi(){return ye()}},{platform:b.NextJsSSR,detectionMethod:function Pi(){return Ze()&&(Ue(global,"__next")||Ue(global,"__NEXT"))}},{platform:b.NuxtSSR,detectionMethod:function Ui(){return Ze()&&typeof global.__NUXT_PATHS__<"u"}},{platform:b.ReactSSR,detectionMethod:function vi(){return xt()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("react"))}},{platform:b.VueJsSSR,detectionMethod:function Ai(){return Ze()&&Ue(global,"__VUE")}},{platform:b.AngularSSR,detectionMethod:function Mi(){return xt()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:b.SvelteSSR,detectionMethod:function Ti(){return xt()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}}];let be;const Qe=[];let et=!1;const At=()=>{if(!be){if(be=function Li(){return ki.find(e=>e.detectionMethod())?.platform||b.ServerSideUnknown}(),et)for(;Qe.length;)Qe.pop()?.();else Qe.forEach(e=>e());Ro(b.ServerSideUnknown,10),Ro(b.WebUnknown,10)}return be},Ao=e=>{et||Qe.push(e)};function Ro(e,t){be===e&&!et&&setTimeout(()=>{(function Vi(){be=void 0})(),et=!0,setTimeout(At,1e3)},t)}const ie={},To="aws-amplify";new class Hi{constructor(){this.userAgent=`${To}/6.0.3`}get framework(){return At()}get isReactNative(){return this.framework===b.ReactNative||this.framework===b.Expo}observeFrameworkChanges(t){Ao(t)}};const tt=e=>(({category:e,action:t}={})=>{const o=[[To,"6.0.3"]];if(e&&o.push([e,t]),o.push(["framework",At()]),e&&t){const r=((e,t)=>ie[e]?.[t]?.additionalDetails)(e,t);r&&r.forEach(i=>{o.push(i)})}return o})(e).map(([o,r])=>o&&r?`${o}/${r}`:o).join(" "),wo="cognito-idp",w=_t(Eo,[()=>(e,t)=>function(){var n=d(function*(r){return r.headers["cache-control"]="no-store",e(r)});return function o(r){return n.apply(this,arguments)}}()]),P={service:wo,endpointResolver:({region:e})=>{const n=I.getConfig().Auth?.Cognito?.userPoolEndpoint,o=new le(`https://${wo}.${e}.${mo(e)}`);return{url:n?new le(n):o}},retryDecider:Io(me),computeDelay:Co,userAgentValue:tt(),cache:"no-store"};class y extends J{constructor(t){super(t),this.constructor=y,Object.setPrototypeOf(this,y.prototype)}}function se(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new y({name:Et.Unknown,message:"An unknown error has ocurred.",underlyingError:e})}const N=e=>(t,n)=>{const o=(e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}))(e);return(({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}))(n,o,JSON.stringify(t))},M=()=>function(){var e=d(function*(t){if(t.statusCode>=300){const n=yield me(t);throw se(n),new y({name:n.name,message:n.message})}return yield Xe(t)});return function(t){return e.apply(this,arguments)}}(),Po=()=>function(){var e=d(function*(t){if(t.statusCode>=300){const n=yield me(t);throw se(n),new y({name:n.name,message:n.message})}});return function(t){return e.apply(this,arguments)}}(),Me=A(w,N("InitiateAuth"),M(),P),Yi=A(w,N("RevokeToken"),M(),P),Ji=A(w,N("SignUp"),M(),P),Xi=A(w,N("ConfirmSignUp"),M(),P),Zi=A(w,N("ForgotPassword"),M(),P),Qi=A(w,N("ConfirmForgotPassword"),M(),P),ne=A(w,N("RespondToAuthChallenge"),M(),P),es=A(w,N("ResendConfirmationCode"),M(),P),No=A(w,N("VerifySoftwareToken"),M(),P),Uo=A(w,N("AssociateSoftwareToken"),M(),P),ts=A(w,N("SetUserMFAPreference"),M(),P),bo=A(w,N("GetUser"),M(),P),ns=A(w,N("ChangePassword"),M(),P),os=A(w,N("ConfirmDevice"),M(),P),rs=A(w,N("ForgetDevice"),Po(),P),is=A(w,N("DeleteUser"),Po(),P),ss=A(w,N("GetUserAttributeVerificationCode"),M(),P),as=A(w,N("GlobalSignOut"),M(),P),cs=A(w,N("UpdateUserAttributes"),M(),P),us=A(w,N("VerifyUserAttribute"),M(),P),ds=A(w,N("UpdateDeviceStatus"),M(),P),ls=A(w,N("ListDevices"),M(),P),fs=A(w,N("DeleteUserAttributes"),M(),P);function S(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new y({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function Rt(e){if(!e||!e.includes(":"))throw new y({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const Tt="UserUnAuthenticatedException",hs="UserAlreadyAuthenticatedException",ps="DeviceMetadataNotFoundException",Mo="AutoSignInException",ms=new y({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),Es=new y({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),Is="OAuthSignOutException";function F(e){if(!e||!e.accessToken)throw new y({name:Tt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function Do(e){if(!e||!e.accessToken||!e.refreshToken)throw new y({name:Tt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function nt(e){if(!(e&&e.deviceKey&&e.deviceGroupKey&&e.randomPassword))throw new y({name:ps,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const Cs={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function k({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const o=window.AmazonCognitoAdvancedSecurityData;if(typeof o>"u")return;const r=o.getData(e,t,n);return r?{EncodedData:r}:{}}const _s=function(){var e=d(function*({tokens:t,authConfig:n,username:o}){m(n?.Cognito);const r=S(n.Cognito.userPoolId);Do(t);const i=t.refreshToken,s={REFRESH_TOKEN:i};t.deviceMetadata?.deviceKey&&(s.DEVICE_KEY=t.deviceMetadata.deviceKey);const a=k({username:o,userPoolId:n.Cognito.userPoolId,userPoolClientId:n.Cognito.userPoolClientId}),{AuthenticationResult:c}=yield Me({region:r},{ClientId:n?.Cognito?.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:s,UserContextData:a}),u=X(c?.AccessToken??""),l=c?.IdToken?X(c.IdToken):void 0,f=u.payload.iat;if(!f)throw new y({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:u,idToken:l,clockDrift:1e3*f-(new Date).getTime(),refreshToken:i,username:o}});return function(n){return e.apply(this,arguments)}}(),vs={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var wt=function(e){return e.InvalidAuthTokens="InvalidAuthTokens",e}(wt||{});const As=fo({[wt.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}});class Rs{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new y({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}loadTokens(){var t=this;return d(function*(){try{const n=yield t.getAuthKeys(),o=yield t.getKeyValueStorage().getItem(n.accessToken);if(!o)throw new y({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=X(o),i=yield t.getKeyValueStorage().getItem(n.idToken),s=i?X(i):void 0,a=(yield t.getKeyValueStorage().getItem(n.refreshToken))??void 0,c=(yield t.getKeyValueStorage().getItem(n.clockDrift))??"0",u=Number.parseInt(c),l=yield t.getKeyValueStorage().getItem(n.signInDetails),f={accessToken:r,idToken:s,refreshToken:a,deviceMetadata:(yield t.getDeviceMetadata())??void 0,clockDrift:u,username:yield t.getLastAuthUser()};return l&&(f.signInDetails=JSON.parse(l)),f}catch{return null}})()}storeTokens(t){var n=this;return d(function*(){As(void 0!==t,wt.InvalidAuthTokens),yield n.clearTokens();const o=t.username;yield n.getKeyValueStorage().setItem(n.getLastAuthUserKey(),o);const r=yield n.getAuthKeys();yield n.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken&&(yield n.getKeyValueStorage().setItem(r.idToken,t.idToken.toString())),t.refreshToken&&(yield n.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken)),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&(yield n.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey)),t.deviceMetadata.deviceGroupKey&&(yield n.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey)),yield n.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&(yield n.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails))),yield n.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)})()}clearTokens(){var t=this;return d(function*(){const n=yield t.getAuthKeys();yield Promise.all([t.getKeyValueStorage().removeItem(n.accessToken),t.getKeyValueStorage().removeItem(n.idToken),t.getKeyValueStorage().removeItem(n.clockDrift),t.getKeyValueStorage().removeItem(n.refreshToken),t.getKeyValueStorage().removeItem(n.signInDetails),t.getKeyValueStorage().removeItem(t.getLastAuthUserKey())])})()}getDeviceMetadata(t){var n=this;return d(function*(){const o=yield n.getAuthKeys(t),r=yield n.getKeyValueStorage().getItem(o.deviceKey),i=yield n.getKeyValueStorage().getItem(o.deviceGroupKey),s=yield n.getKeyValueStorage().getItem(o.randomPasswordKey);return s?{deviceKey:r??void 0,deviceGroupKey:i??void 0,randomPassword:s}:null})()}clearDeviceMetadata(t){var n=this;return d(function*(){const o=yield n.getAuthKeys(t);yield Promise.all([n.getKeyValueStorage().removeItem(o.deviceKey),n.getKeyValueStorage().removeItem(o.deviceGroupKey),n.getKeyValueStorage().removeItem(o.randomPasswordKey)])})()}getAuthKeys(t){var n=this;return d(function*(){m(n.authConfig?.Cognito);const o=t??(yield n.getLastAuthUser());return Ts(n.name,`${n.authConfig.Cognito.userPoolClientId}.${o}`)})()}getLastAuthUserKey(){return m(this.authConfig?.Cognito),`${this.name}.${this.authConfig.Cognito.userPoolClientId}.LastAuthUser`}getLastAuthUser(){var t=this;return d(function*(){return(yield t.getKeyValueStorage().getItem(t.getLastAuthUserKey()))??"username"})()}}const Ts=(e,t)=>Pt(vs)(`${e}`,t);function Pt(e){const t=Object.values({...e});return(n,o)=>t.reduce((r,i)=>({...r,[i]:`${n}.${o}.${i}`}),{})}class ws{constructor(){this.waitForInflightOAuth=d(function*(){})}setAuthConfig(t){this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}setWaitForInflightOAuth(t){this.waitForInflightOAuth=t}getTokenStore(){if(!this.tokenStore)throw new y({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new y({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}getTokens(t){var n=this;return d(function*(){let o;try{m(n.authConfig?.Cognito)}catch{return null}yield n.waitForInflightOAuth(),o=yield n.getTokenStore().loadTokens();const r=yield n.getTokenStore().getLastAuthUser();if(null===o)return null;const i=!!o?.idToken&&Pe({expiresAt:1e3*(o.idToken?.payload?.exp??0),clockDrift:o.clockDrift??0}),s=Pe({expiresAt:1e3*(o.accessToken?.payload?.exp??0),clockDrift:o.clockDrift??0});return(t?.forceRefresh||i||s)&&(o=yield n.refreshTokens({tokens:o,username:r}),null===o)?null:{accessToken:o?.accessToken,idToken:o?.idToken,signInDetails:o?.signInDetails}})()}refreshTokens({tokens:t,username:n}){var o=this;return d(function*(){try{const r=yield o.getTokenRefresher()({tokens:t,authConfig:o.authConfig,username:n});return yield o.setTokens({tokens:r}),V.dispatch("auth",{event:"tokenRefresh"},"Auth",W),r}catch(r){return o.handleErrors(r)}})()}handleErrors(t){if(se(t),"Network error"!==t.message&&this.clearTokens(),t.name.startsWith("NotAuthorizedException"))return null;throw V.dispatch("auth",{event:"tokenRefresh_failure"},"Auth",W),t}setTokens({tokens:t}){var n=this;return d(function*(){return n.getTokenStore().storeTokens(t)})()}clearTokens(){var t=this;return d(function*(){return t.getTokenStore().clearTokens()})()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}}const Ee=new class Ps{constructor(){this.authTokenStore=new Rs,this.authTokenStore.setKeyValueStorage(ge),this.tokenOrchestrator=new ws,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(_s)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setWaitForInflightOAuth(t){this.tokenOrchestrator.setWaitForInflightOAuth(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}},L=Ee.tokenOrchestrator,Ns={identityId:"identityId"},Us=new de("DefaultIdentityIdStore");var Oo=z(7582),j=64,Os=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fs=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ks=Math.pow(2,53)-1,ot=function(){function e(){this.state=Int32Array.from(Fs),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,o=t.byteLength;if(this.bytesHashed+=o,8*this.bytesHashed>ks)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[n++],o--,this.bufferLength===j&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=8*this.bytesHashed,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%j>=56){for(var r=this.bufferLength;r<j;r++)n.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<56;r++)n.setUint8(r,0);n.setUint32(56,Math.floor(t/4294967296),!0),n.setUint32(60,t),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var n=this.buffer,o=this.state,r=o[0],i=o[1],s=o[2],a=o[3],c=o[4],u=o[5],l=o[6],f=o[7],h=0;h<j;h++){if(h<16)this.temp[h]=(255&n[4*h])<<24|(255&n[4*h+1])<<16|(255&n[4*h+2])<<8|255&n[4*h+3];else{var g=this.temp[h-2];this.temp[h]=(((g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10)+this.temp[h-7]|0)+((((g=this.temp[h-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)+this.temp[h-16]|0)}var R=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&l)|0)+(f+(Os[h]+this.temp[h]|0)|0)|0,T=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;f=l,l=u,u=c,c=a+R|0,a=s,s=i,i=r,r=R+T|0}o[0]+=r,o[1]+=i,o[2]+=s,o[3]+=a,o[4]+=c,o[5]+=u,o[6]+=l,o[7]+=f},e}(),Ks=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function Fo(e){return e instanceof Uint8Array?e:"string"==typeof e?Ks(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var De=function(){function e(t){this.secret=t,this.hash=new ot,this.reset()}return e.prototype.update=function(t){if(!function Bs(e){return"string"==typeof e?0===e.length:0===e.byteLength}(t)&&!this.error)try{this.hash.update(Fo(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,Oo.mG)(this,void 0,void 0,function(){return(0,Oo.Jh)(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new ot,this.secret){this.outer=new ot;var t=function Ws(e){var t=Fo(e);if(t.byteLength>j){var n=new ot;n.update(t),t=n.digest()}var o=new Uint8Array(j);return o.set(t),o}(this.secret),n=new Uint8Array(j);n.set(t);for(var o=0;o<j;o++)t[o]^=54,n[o]^=92;for(this.hash.update(t),this.outer.update(n),o=0;o<t.byteLength;o++)t[o]=0}},e}();const ko={},Nt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),ko[e]=t,Nt[t]=e}const Lo=_t(Eo,[()=>(e,t)=>function(){var n=d(function*(r){return r.headers["cache-control"]="no-store",e(r)});return function o(r){return n.apply(this,arguments)}}()]),Ut={service:"cognito-identity",endpointResolver:({region:e})=>({url:new le(`https://cognito-identity.${e}.${mo(e)}`)}),retryDecider:Io(me),computeDelay:Co,userAgentValue:tt(),cache:"no-store"};Ao(()=>{Ut.userAgentValue=tt()});const Ko=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Bo=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),Hs=A(Lo,(e,t)=>{const n=Ko("GetId"),o=JSON.stringify(e);return Bo(t,n,o)},function(){var e=d(function*(t){if(t.statusCode>=300)throw yield me(t);return{IdentityId:(yield Xe(t)).IdentityId,$metadata:Je(t)}});return function(n){return e.apply(this,arguments)}}(),Ut);function Wo(e){const t=X(e).payload.iss,n={};if(!t)throw new y({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}const zs=new de("CognitoIdentityIdProvider");function bt(){return(bt=d(function*({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let o=yield n.loadIdentityId();if(e){if(o&&"primary"===o.type)return o.id;{const r=e.idToken?Wo(e.idToken.toString()):{},i=yield Vo(r,t);o&&o.id===i&&zs.debug(`The guest identity ${o.id} has become the primary identity.`),o={id:i,type:"primary"}}}else{if(o&&"guest"===o.type)return o.id;o={id:yield Vo({},t),type:"guest"}}return n.storeIdentityId(o),o.id})).apply(this,arguments)}function Vo(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=d(function*(e,t){const n=t?.identityPoolId,o=Rt(n),r=(yield Hs({region:o},{IdentityPoolId:n,Logins:e})).IdentityId;if(!r)throw new y({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return r})).apply(this,arguments)}const Gs=function(){var e=d(function*(t){if(t.statusCode>=300)throw yield me(t);{const n=yield Xe(t);return{IdentityId:n.IdentityId,Credentials:Ys(n.Credentials),$metadata:Je(t)}}});return function(n){return e.apply(this,arguments)}}(),Ys=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o&&new Date(1e3*o)}),qo=A(Lo,(e,t)=>{const n=Ko("GetCredentialsForIdentity"),o=JSON.stringify(e);return Bo(t,n,o)},Gs,Ut),rt=new de("CognitoCredentialsProvider"),Xs=new class Js{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}clearCredentialsAndIdentityId(){var t=this;return d(function*(){rt.debug("Clearing out credentials and identityId"),t._credentialsAndIdentityId=void 0,yield t._identityIdStore.clearIdentityId()})()}clearCredentials(){var t=this;return d(function*(){rt.debug("Clearing out in-memory credentials"),t._credentialsAndIdentityId=void 0})()}getCredentialsAndIdentityId(t){var n=this;return d(function*(){const o=t.authenticated,r=t.tokens,i=t.authConfig;try{Ye(i?.Cognito)}catch{return}if(!o&&!i.Cognito.allowGuestAccess)return;const s=t.forceRefresh,a=n.hasTokenChanged(r),c=yield function $s(e){return bt.apply(this,arguments)}({tokens:r,authConfig:i.Cognito,identityIdStore:n._identityIdStore});return(s||a)&&n.clearCredentials(),o?(function Ss(e){if(!e||!e.idToken)throw new y({name:Tt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(r),n.credsForOIDCTokens(i.Cognito,r,c)):n.getGuestCredentials(c,i.Cognito)})()}getGuestCredentials(t,n){var o=this;return d(function*(){if(o._credentialsAndIdentityId&&!o.isPastTTL()&&!1===o._credentialsAndIdentityId.isAuthenticatedCreds)return rt.info("returning stored credentials as they neither past TTL nor expired."),o._credentialsAndIdentityId;o.clearCredentials();const r=Rt(n.identityPoolId),i=yield qo({region:r},{IdentityId:t});if(i.Credentials&&i.Credentials.AccessKeyId&&i.Credentials.SecretKey){o._nextCredentialsRefresh=(new Date).getTime()+3e6;const s={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t},a=i.IdentityId;return a&&(s.identityId=a,o._identityIdStore.storeIdentityId({id:a,type:"guest"})),o._credentialsAndIdentityId={...s,isAuthenticatedCreds:!1},s}throw new y({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})()}credsForOIDCTokens(t,n,o){var r=this;return d(function*(){if(r._credentialsAndIdentityId&&!r.isPastTTL()&&!0===r._credentialsAndIdentityId.isAuthenticatedCreds)return rt.debug("returning stored credentials as they neither past TTL nor expired."),r._credentialsAndIdentityId;r.clearCredentials();const i=n.idToken?Wo(n.idToken.toString()):{},s=Rt(t.identityPoolId),a=yield qo({region:s},{IdentityId:o,Logins:i});if(a.Credentials&&a.Credentials.AccessKeyId&&a.Credentials.SecretKey){const c={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:o};r._credentialsAndIdentityId={...c,isAuthenticatedCreds:!0,associatedIdToken:n.idToken?.toString()},r._nextCredentialsRefresh=(new Date).getTime()+3e6;const u=a.IdentityId;return u&&(c.identityId=u,r._identityIdStore.storeIdentityId({id:u,type:"primary"})),c}throw new y({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})()}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){return!!t&&!!this._credentialsAndIdentityId?.associatedIdToken&&t.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}(new class bs{setAuthConfig(t){Ye(t.Cognito),this.authConfig=t,this._authKeys=((e,t)=>Pt(Ns)(`com.amplify.${e}`,t))("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this.keyValueStorage=t}loadIdentityId(){var t=this;return d(function*(){Ye(t.authConfig?.Cognito);try{if(t._primaryIdentityId)return{id:t._primaryIdentityId,type:"primary"};{const n=yield t.keyValueStorage.getItem(t._authKeys.identityId);return n?{id:n,type:"guest"}:null}}catch(n){return Us.log("Error getting stored IdentityId.",n),null}})()}storeIdentityId(t){var n=this;return d(function*(){Ye(n.authConfig?.Cognito),"guest"===t.type?(n.keyValueStorage.setItem(n._authKeys.identityId,t.id),n._primaryIdentityId=void 0):(n._primaryIdentityId=t.id,n.keyValueStorage.removeItem(n._authKeys.identityId))})()}clearIdentityId(){var t=this;return d(function*(){t._primaryIdentityId=void 0,yield t.keyValueStorage.removeItem(t._authKeys.identityId)})()}}(ge)),Zs={configure(e,t){let n;return n=Object.keys(e).some(o=>o.startsWith("aws_"))?ao(e):e,!n.Auth||t?.Auth?I.configure(n,t):I.libraryOptions.Auth?t?(void 0!==t.ssr&&Ee.setKeyValueStorage(t.ssr?new lo({sameSite:"lax"}):ge),I.configure(n,{Auth:I.libraryOptions.Auth,...t})):void I.configure(n):(Ee.setAuthConfig(n.Auth),Ee.setKeyValueStorage(t?.ssr?new lo({sameSite:"lax"}):ge),I.configure(n,{...t,Auth:{tokenProvider:Ee,credentialsProvider:Xs}}))},getConfig:()=>I.getConfig()},Qs={production:!0,cognito:{userPoolId:"ap-northeast-1_ss3U3nmDQ",userPoolClientId:"5bql63bis2v80ne3qn20npmi0u"},stripe:{key:"pk_test_51OFbKaSCNIJH36kwlNitcgi9DGRUjcddnz6ZljqLIofHTN8PQV3SpDaF9CDVlWabvqqhUfJAZOrAOZ7uOWMfe5BJ00pBY9hN0m"}};var E=function(e){return e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword",e}(E||{});const ea={[E.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[E.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[E.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[E.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[E.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[E.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[E.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[E.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[E.EmptySignInPassword]:{message:"password is required to signIn"},[E.EmptySignInUsername]:{message:"username is required to signIn"},[E.EmptySignUpPassword]:{message:"password is required to signUp"},[E.EmptySignUpUsername]:{message:"username is required to signUp"},[E.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[E.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[E.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[E.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[E.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var O=function(e){return e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",e}(O||{}),Ie=function(e){return e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException",e}(Ie||{});function U(e,t){const{message:n,recoverySuggestion:o}=ea[t];if(!e)throw new y({name:t,message:n,recoverySuggestion:o})}function Dt(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}const Oe={convert(e,{urlSafe:t}={urlSafe:!1}){const n="string"==typeof e?e:function na(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}(e),o=(()=>{if(typeof window<"u"&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new J({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(n);return t?o.replace(/\+/g,"-").replace(/\//g,"_"):o}};function p(e,t){null!=e&&this.fromString(e,t)}function q(){return new p(null,null)}let ae;const $o=typeof navigator<"u";$o&&"Microsoft Internet Explorer"===navigator.appName?(p.prototype.am=function ra(e,t,n,o,r,i){const s=32767&t,a=t>>15;for(;--i>=0;){let c=32767&this[e];const u=this[e++]>>15,l=a*c+u*s;c=s*c+((32767&l)<<15)+n[o]+(1073741823&r),r=(c>>>30)+(l>>>15)+a*u+(r>>>30),n[o++]=1073741823&c}return r},ae=30):$o&&"Netscape"!==navigator.appName?(p.prototype.am=function oa(e,t,n,o,r,i){for(;--i>=0;){const s=t*this[e++]+n[o]+r;r=Math.floor(s/67108864),n[o++]=67108863&s}return r},ae=26):(p.prototype.am=function ia(e,t,n,o,r,i){const s=16383&t,a=t>>14;for(;--i>=0;){let c=16383&this[e];const u=this[e++]>>14,l=a*c+u*s;c=s*c+((16383&l)<<14)+n[o]+r,r=(c>>28)+(l>>14)+a*u,n[o++]=268435455&c}return r},ae=28),p.prototype.DB=ae,p.prototype.DM=(1<<ae)-1,p.prototype.DV=1<<ae,p.prototype.FV=Math.pow(2,52),p.prototype.F1=52-ae,p.prototype.F2=2*ae-52;const it=new Array;let Se,G;for(Se="0".charCodeAt(0),G=0;G<=9;++G)it[Se++]=G;for(Se="a".charCodeAt(0),G=10;G<36;++G)it[Se++]=G;for(Se="A".charCodeAt(0),G=10;G<36;++G)it[Se++]=G;function jo(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function aa(e,t){return it[e.charCodeAt(t)]??-1}function Ft(e){var t=q();return t.fromInt(e),t}function kt(e){var n,t=1;return 0!=(n=e>>>16)&&(e=n,t+=16),0!=(n=e>>8)&&(e=n,t+=8),0!=(n=e>>4)&&(e=n,t+=4),0!=(n=e>>2)&&(e=n,t+=2),0!=(n=e>>1)&&(e=n,t+=1),t}function Ce(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}Ce.prototype.convert=function Ma(e){var t=q();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(p.ZERO)>0&&this.m.subTo(t,t),t},Ce.prototype.revert=function Da(e){var t=q();return e.copyTo(t),this.reduce(t),t},Ce.prototype.reduce=function Oa(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Ce.prototype.mulTo=function ka(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Ce.prototype.sqrTo=function Fa(e,t){e.squareTo(t),this.reduce(t)},p.prototype.copyTo=function ca(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},p.prototype.fromInt=function ua(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},p.prototype.fromString=function da(e,t){let n;if(16===t)n=4;else if(8===t)n=3;else if(2===t)n=1;else if(32===t)n=5;else{if(4!==t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;let o=e.length,r=!1,i=0;for(;--o>=0;){const s=aa(e,o);s<0?"-"===e.charAt(o)&&(r=!0):(r=!1,0===i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,i+=n,i>=this.DB&&(i-=this.DB))}this.clamp(),r&&p.ZERO.subTo(this,this)},p.prototype.clamp=function la(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},p.prototype.dlShiftTo=function ya(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},p.prototype.drShiftTo=function Ea(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},p.prototype.lShiftTo=function Ia(e,t){const n=e%this.DB,o=this.DB-n,r=(1<<o)-1;let a,i=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(a=this.t-1;a>=0;--a)t[a+i+1]=this[a]>>o|s,s=(this[a]&r)<<n;for(a=i-1;a>=0;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},p.prototype.rShiftTo=function Sa(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);const o=e%this.DB,r=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(let s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<r,t[s-n]=this[s]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<r),t.t=this.t-n,t.clamp()},p.prototype.subTo=function Ca(e,t){let n=0,o=0,r=Math.min(e.t,this.t);for(;n<r;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()},p.prototype.multiplyTo=function _a(e,t){const n=this.abs(),o=e.abs();let r=n.t;for(t.t=r+o.t;--r>=0;)t[r]=0;for(r=0;r<o.t;++r)t[r+n.t]=n.am(0,o[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&p.ZERO.subTo(t,t)},p.prototype.squareTo=function va(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},p.prototype.divRemTo=function xa(e,t,n){var o=e.abs();if(o.t<=0)return;var r=this.abs();if(r.t<o.t)return t?.fromInt(0),void(null!=n&&this.copyTo(n));null===n&&(n=q());var i=q(),s=this.s,a=e.s,c=this.DB-kt(o[o.t-1]);c>0?(o.lShiftTo(c,i),r.lShiftTo(c,n)):(o.copyTo(i),r.copyTo(n));const u=i.t,l=i[u-1];if(0===l)return;const f=l*(1<<this.F1)+(u>1?i[u-2]>>this.F2:0),h=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2;let x=n.t,R=x-u,T=null===t?q():t;for(i.dlShiftTo(R,T),n.compareTo(T)>=0&&(n[n.t++]=1,n.subTo(T,n)),p.ONE.dlShiftTo(u,T),T.subTo(i,i);i.t<u;)i[i.t++]=0;for(;--R>=0;){var Y=n[--x]===l?this.DM:Math.floor(n[x]*h+(n[x-1]+v)*g);if((n[x]+=i.am(0,Y,n,R,0,u))<Y)for(i.dlShiftTo(R,T),n.subTo(T,n);n[x]<--Y;)n.subTo(T,n)}null!==t&&(n.drShiftTo(u,t),s!==a&&p.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&p.ZERO.subTo(n,n)},p.prototype.invDigit=function Ra(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},p.prototype.addTo=function wa(e,t){let n=0,o=0,r=Math.min(e.t,this.t);for(;n<r;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()},p.prototype.toString=function fa(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else{if(4!==e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}let o,n=(1<<t)-1,r=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(o=this[s]>>a)>0&&(r=!0,i=jo(o));s>=0;)a<t?(o=(this[s]&(1<<a)-1)<<t-a,o|=this[--s]>>(a+=this.DB-t)):(o=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),o>0&&(r=!0),r&&(i+=jo(o));return r?i:"0"},p.prototype.negate=function ha(){var e=q();return p.ZERO.subTo(this,e),e},p.prototype.abs=function pa(){return this.s<0?this.negate():this},p.prototype.compareTo=function ga(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},p.prototype.bitLength=function ma(){return this.t<=0?0:this.DB*(this.t-1)+kt(this[this.t-1]^this.s&this.DM)},p.prototype.mod=function Aa(e){var t=q();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(p.ZERO)>0&&e.subTo(t,t),t},p.prototype.equals=function Ta(e){return 0===this.compareTo(e)},p.prototype.add=function Pa(e){var t=q();return this.addTo(e,t),t},p.prototype.subtract=function Na(e){var t=q();return this.subTo(e,t),t},p.prototype.multiply=function Ua(e){var t=q();return this.multiplyTo(e,t),t},p.prototype.divide=function ba(e){var t=q();return this.divRemTo(e,t,null),t},p.prototype.modPow=function La(e,t,n){let r,o=e.bitLength(),i=Ft(1),s=new Ce(t);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;let a=new Array,c=3,u=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){const T=q();for(s.sqrTo(a[1],T);c<=l;)a[c]=q(),s.mulTo(T,a[c-2],a[c]),c+=2}let h,x,f=e.t-1,g=!0,v=q();for(o=kt(e[f])-1;f>=0;){for(o>=u?h=e[f]>>o-u&l:(h=(e[f]&(1<<o+1)-1)<<u-o,f>0&&(h|=e[f-1]>>this.DB+o-u)),c=r;!(1&h);)h>>=1,--c;if((o-=c)<0&&(o+=this.DB,--f),g)a[h].copyTo(i),g=!1;else{for(;c>1;)s.sqrTo(i,v),s.sqrTo(v,i),c-=2;c>0?s.sqrTo(i,v):(x=i,i=v,v=x),s.mulTo(v,a[h],i)}for(;f>=0&&!(e[f]&1<<o);)s.sqrTo(i,v),x=i,i=v,v=x,--o<0&&(o=this.DB-1,--f)}var R=s.revert(i);return n(null,R),R},p.ZERO=Ft(0),p.ONE=Ft(1);const st={convert:e=>(new TextEncoder).encode(e)},Ka=function(){var e=d(function*({a:t,g:n,k:o,x:r,B:i,N:s,U:a}){return new Promise((c,u)=>{n.modPow(r,s,(l,f)=>{l?u(l):i.subtract(o.multiply(f)).modPow(t.add(a.multiply(r)),s,(h,g)=>{h?u(h):c(g.mod(s))})})})});return function(n){return e.apply(this,arguments)}}(),Go={},Lt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Go[e]=t,Lt[t]=e}const _e=e=>{if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(!(o in Lt))throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`);t[n/2]=Lt[o]}return t},Kt=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Go[e[n]];return t},Bt=e=>{const t=new De;t.update(e);const n=t.digestSync(),o=Kt(n);return new Array(64-o.length).join("0")+o},at=e=>Bt(_e(e)),Wa=/^[89a-f]/i,oe=e=>{if(!(e instanceof p))throw new Error("Not a BigInteger");const t=e.compareTo(p.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!=0?`0${n}`:n,n=Wa.test(n)?`00${n}`:n,t){const o=n.split("").map(i=>{const s=15&~parseInt(i,16);return"0123456789ABCDEF".charAt(s)}).join("");n=new p(o,16).add(p.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n};class Wt{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],this.sigBytes=void 0!==n?n:4*o.length}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(ho().getRandomValues(new Uint32Array(1))[0]);return new Wt(n,t)}toString(){return function za(e){const t=e.words,n=e.sigBytes,o=[];for(let r=0;r<n;r++){const i=t[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")}(this)}}const Vt=e=>{const t=(new Wt).random(e).toString();return _e(t)};class ja{constructor({userPoolName:t,a:n,g:o,A:r,N:i}){this.encoder=st,this.userPoolName=t,this.a=n,this.g=o,this.A=r,this.N=i,this.k=new p(at(`${oe(i)}${oe(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new y({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new y({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new y({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}generateHashDevice(t,n){var o=this;return d(function*(){o.randomPassword=Oe.convert(Vt(40));const i=Bt(`${t}${n}:${o.randomPassword}`),s=Kt(Vt(16));return o.saltToHashDevices=oe(new p(s,16)),new Promise((a,c)=>{o.g.modPow(new p(at(o.saltToHashDevices+i),16),o.N,(u,l)=>{u?c(u):(o.verifierDevices=oe(l),a())})})})()}getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:r}){var i=this;return d(function*(){if(o.mod(i.N).equals(p.ZERO))throw new Error("B cannot be zero.");const s=(({A:e,B:t})=>{const n=new p(at(oe(e)+oe(t)),16);if(n.equals(p.ZERO))throw new Error("U cannot be zero.");return n})({A:i.A,B:o}),c=Bt(`${i.userPoolName}${t}:${n}`),u=new p(at(oe(r)+c),16),l=yield Ka({a:i.a,g:i.g,k:i.k,x:u,B:o,N:i.N,U:s}),f=i.encoder.convert("Caldera Derived Key"),h=i.encoder.convert(String.fromCharCode(1)),g=new Uint8Array(f.byteLength+h.byteLength);return g.set(f,0),g.set(h,f.byteLength),((e,t,n)=>{const o=new De(t);o.update(e);const r=o.digestSync(),i=new De(r);return i.update(n),i.digestSync().slice(0,16)})(_e(oe(l)),_e(oe(s)),g)})()}}const Ga=function(){var e=d(function*({a:t,g:n,N:o}){return new Promise((r,i)=>{n.modPow(t,o,(s,a)=>{s?i(s):a.mod(o).equals(p.ZERO)?i(new Error("Illegal parameter. A mod N cannot be 0.")):r(a)})})});return function(n){return e.apply(this,arguments)}}(),ct=function(){var e=d(function*(t){const n=new p("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),o=new p("2",16),r=Ya(),i=yield Ga({a:r,g:o,N:n});return new ja({userPoolName:t,a:r,g:o,A:i,N:n})});return function(n){return e.apply(this,arguments)}}(),Ya=()=>new p(Kt(Vt(128)),16),Ja=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Yo=()=>{const e=new Date,t=Xa[e.getUTCDay()],n=Ja[e.getUTCMonth()],o=e.getUTCDate();let r=e.getUTCHours();r<10&&(r=`0${r}`);let i=e.getUTCMinutes();i<10&&(i=`0${i}`);let s=e.getUTCSeconds();return s<10&&(s=`0${s}`),`${t} ${n} ${o} ${r}:${i}:${s} UTC ${e.getUTCFullYear()}`},Jo=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:r})=>{const i=st.convert(e),s=st.convert(t),a=Za(n.SECRET_BLOCK),c=st.convert(o),u=new Uint8Array(i.byteLength+s.byteLength+a.byteLength+c.byteLength);u.set(i,0),u.set(s,i.byteLength),u.set(a,i.byteLength+s.byteLength),u.set(c,i.byteLength+s.byteLength+a.byteLength);const l=new De(r);l.update(u);const f=l.digestSync();return Oe.convert(f)},Za=e=>{const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=po.convert(n),r=new Uint8Array(o.length);for(let i=0;i<o.length;++i)r[i]=o.charCodeAt(i);return r};var qt=function(e){return e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException",e}(qt||{});const _c="SetUpTOTPException",ce=(e=>{let t=e({username:void 0,challengeName:void 0,signInSession:void 0},{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}})((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return{username:void 0,challengeName:void 0,signInSession:void 0};default:return e}});function Fe(e){ce.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function re(){ce.dispatch({type:"SET_INITIAL_STATE"})}const xc=function(){var e=d(function*(t){const n=t.getConfig().Auth?.Cognito;m(n);const o=yield t.Auth.getTokens({forceRefresh:!1});F(o);const{"cognito:username":r,sub:i}=o.idToken?.payload??{},s={username:r,userId:i},a=function Ac(e){return e?.signInDetails}(o);return a&&(s.signInDetails=a),s});return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=d(function*(){return xc(I)});return function(){return e.apply(this,arguments)}}(),_=(e,t)=>tt({category:_o.Auth,action:e,...t}),Ht="userAttributes.";function Rc(e){return zt.apply(this,arguments)}function zt(){return(zt=d(function*({challengeResponse:e,clientMetadata:t,session:n,username:o,config:r,tokenOrchestrator:i}){const{userPoolId:s,userPoolClientId:a}=r,c={USERNAME:o,ANSWER:e},u=yield i?.getDeviceMetadata(o);u&&u.deviceKey&&(c.DEVICE_KEY=u.deviceKey);const f={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:c,Session:n,ClientMetadata:t,ClientId:a,UserContextData:k({username:o,userPoolId:s,userPoolClientId:a})},h=yield ne({region:S(s),userAgentValue:_(C.ConfirmSignIn)},f);return"DEVICE_SRP_AUTH"===h.ChallengeName?ut({username:o,config:r,clientMetadata:t,session:h.Session,tokenOrchestrator:i}):h})).apply(this,arguments)}function $t(){return($t=d(function*({challengeResponse:e,username:t,clientMetadata:n,session:o,deviceName:r,config:i}){const{userPoolId:s,userPoolClientId:a}=i,c={USERNAME:t},{Session:u}=yield No({region:S(s),userAgentValue:_(C.ConfirmSignIn)},{UserCode:e,Session:o,FriendlyDeviceName:r});ce.dispatch({type:"SET_SIGN_IN_SESSION",value:u});const l={ChallengeName:"MFA_SETUP",ChallengeResponses:c,Session:u,ClientMetadata:n,ClientId:a};return ne({region:S(s)},l)})).apply(this,arguments)}function jt(){return(jt=d(function*({challengeResponse:e,username:t,clientMetadata:n,session:o,config:r}){const{userPoolId:i,userPoolClientId:s}=r;U("TOTP"===e||"SMS"===e,E.IncorrectMFAMethod);const u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:{USERNAME:t,ANSWER:Bc(e)},Session:o,ClientMetadata:n,ClientId:s,UserContextData:k({username:t,userPoolId:i,userPoolClientId:s})};return ne({region:S(i),userAgentValue:_(C.ConfirmSignIn)},u)})).apply(this,arguments)}function Gt(){return(Gt=d(function*({challengeResponse:e,clientMetadata:t,session:n,username:o,config:r}){const{userPoolId:i,userPoolClientId:s}=r,u={ChallengeName:"SMS_MFA",ChallengeResponses:{USERNAME:o,SMS_MFA_CODE:e},Session:n,ClientMetadata:t,ClientId:s,UserContextData:k({username:o,userPoolId:i,userPoolClientId:s})};return ne({region:S(i),userAgentValue:_(C.ConfirmSignIn)},u)})).apply(this,arguments)}function Yt(){return(Yt=d(function*({challengeResponse:e,clientMetadata:t,session:n,username:o,config:r}){const{userPoolId:i,userPoolClientId:s}=r,u={ChallengeName:"SOFTWARE_TOKEN_MFA",ChallengeResponses:{USERNAME:o,SOFTWARE_TOKEN_MFA_CODE:e},Session:n,ClientMetadata:t,ClientId:s,UserContextData:k({username:o,userPoolId:i,userPoolClientId:s})};return ne({region:S(i),userAgentValue:_(C.ConfirmSignIn)},u)})).apply(this,arguments)}function Jt(){return(Jt=d(function*({challengeResponse:e,clientMetadata:t,session:n,username:o,requiredAttributes:r,config:i}){const{userPoolId:s,userPoolClientId:a}=i,l={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:{...Lc(r),NEW_PASSWORD:e,USERNAME:o},ClientMetadata:t,Session:n,ClientId:a,UserContextData:k({username:o,userPoolId:s,userPoolClientId:a})};return ne({region:S(s),userAgentValue:_(C.ConfirmSignIn)},l)})).apply(this,arguments)}function bc(e,t,n,o,r){return Xt.apply(this,arguments)}function Xt(){return(Xt=d(function*(e,t,n,o,r){const{userPoolClientId:i,userPoolId:s}=o,a={USERNAME:e,PASSWORD:t},c=yield r.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:i,UserContextData:k({username:e,userPoolId:s,userPoolClientId:i})},f=yield Me({region:S(s),userAgentValue:_(C.SignIn)},l),h=f.ChallengeParameters?.USERNAME??f.ChallengeParameters?.USER_ID_FOR_SRP??e;return lt(h),"DEVICE_SRP_AUTH"===f.ChallengeName?ut({username:h,config:o,clientMetadata:n,session:f.Session,tokenOrchestrator:r}):f})).apply(this,arguments)}function Zt(){return(Zt=d(function*(e,t,n,o,r){const{userPoolId:i,userPoolClientId:s}=o,a=i?.split("_")[1]||"",c=yield ct(a),f={AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16)},ClientMetadata:n,ClientId:s,UserContextData:k({username:e,userPoolId:i,userPoolClientId:s})},h=yield Me({region:S(i),userAgentValue:_(C.SignIn)},f),{ChallengeParameters:g,Session:v}=h,x=g?.USERNAME??e;return lt(x),Be(Zo,[t,g,n,v,c,o,r],x,r)})).apply(this,arguments)}function Dc(e,t,n,o){return Qt.apply(this,arguments)}function Qt(){return(Qt=d(function*(e,t,n,o){const{userPoolClientId:r,userPoolId:i}=n,s={USERNAME:e},a=yield o.getDeviceMetadata(e);a&&a.deviceKey&&(s.DEVICE_KEY=a.deviceKey);const u={AuthFlow:"CUSTOM_AUTH",AuthParameters:s,ClientMetadata:t,ClientId:r,UserContextData:k({username:e,userPoolId:i,userPoolClientId:r})},l=yield Me({region:S(i),userAgentValue:_(C.SignIn)},u),f=l.ChallengeParameters?.USERNAME??e;return lt(f),"DEVICE_SRP_AUTH"===l.ChallengeName?ut({username:f,config:n,clientMetadata:t,session:l.Session,tokenOrchestrator:o}):l})).apply(this,arguments)}function en(){return(en=d(function*(e,t,n,o,r){m(o);const{userPoolId:i,userPoolClientId:s}=o,a=i?.split("_")[1]||"",c=yield ct(a),f={AuthFlow:"CUSTOM_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},ClientMetadata:n,ClientId:s,UserContextData:k({username:e,userPoolId:i,userPoolClientId:s})},{ChallengeParameters:h,Session:g}=yield Me({region:S(i),userAgentValue:_(C.SignIn)},f),v=h?.USERNAME??e;return lt(v),Be(Zo,[t,h,n,g,c,o,r],v,r)})).apply(this,arguments)}function ut(e){return tn.apply(this,arguments)}function tn(){return tn=d(function*({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:r}){const i=t.userPoolId,s=t.userPoolClientId,a=yield r?.getDeviceMetadata(e);nt(a);const c=yield ct(a.deviceGroupKey),l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s,ChallengeResponses:{USERNAME:e,SRP_A:c.A.toString(16),DEVICE_KEY:a.deviceKey},ClientMetadata:n,Session:o},{ChallengeParameters:f,Session:h}=yield ne({region:S(i)},l);return function Fc(e,t,n,o,r,i,s){return nn.apply(this,arguments)}(e,f,n,h,c,t,r)}),tn.apply(this,arguments)}function nn(){return(nn=d(function*(e,t,n,o,r,{userPoolId:i,userPoolClientId:s},a){const c=yield a?.getDeviceMetadata(e);nt(c);const u=new p(t?.SRP_B,16),l=new p(t?.SALT,16),f=c.deviceKey,h=c.deviceGroupKey,g=yield r.getPasswordAuthenticationKey({username:c.deviceKey,password:c.randomPassword,serverBValue:u,salt:l}),v=Yo(),T={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s,ChallengeResponses:{USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:v,PASSWORD_CLAIM_SIGNATURE:Jo({username:f,userPoolName:h,challengeParameters:t,dateNow:v,hkdf:g}),DEVICE_KEY:f},Session:o,ClientMetadata:n,UserContextData:k({username:e,userPoolId:i,userPoolClientId:s})};return ne({region:S(i)},T)})).apply(this,arguments)}function Zo(e,t,n,o,r,i,s){return on.apply(this,arguments)}function on(){return(on=d(function*(e,t,n,o,r,i,s){const{userPoolId:a,userPoolClientId:c}=i,u=a?.split("_")[1]||"",l=new p(t?.SRP_B,16),f=new p(t?.SALT,16),h=t?.USER_ID_FOR_SRP;if(!h)throw new y({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const g=yield r.getPasswordAuthenticationKey({username:h,password:e,serverBValue:l,salt:f}),v=Yo(),x={USERNAME:h,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:v,PASSWORD_CLAIM_SIGNATURE:Jo({username:h,userPoolName:u,challengeParameters:t,dateNow:v,hkdf:g})},R=yield s.getDeviceMetadata(h);R&&R.deviceKey&&(x.DEVICE_KEY=R.deviceKey);const Y={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:x,ClientMetadata:n,Session:o,ClientId:c,UserContextData:k({username:h,userPoolId:a,userPoolClientId:c})},ee=yield ne({region:S(a)},Y);return"DEVICE_SRP_AUTH"===ee.ChallengeName?ut({username:h,config:i,clientMetadata:n,session:ee.Session,tokenOrchestrator:s}):ee})).apply(this,arguments)}function ke(e){return rn.apply(this,arguments)}function rn(){return(rn=d(function*(e){const{challengeName:t,challengeParameters:n}=e,o=I.getConfig().Auth?.Cognito;switch(m(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":const{signInSession:r,username:i}=ce.getState();if(!function Wc(e,t){const{MFAS_CAN_SETUP:n}=e,o=dt(an(n));return!!o&&o.includes(t)}(n,"TOTP"))throw new y({name:Ie.SignInException,message:`Cannot initiate MFA setup from available types: ${dt(an(n.MFAS_CAN_SETUP))}`});const{Session:s,SecretCode:a}=yield Uo({region:S(o.userPoolId)},{Session:r});return ce.dispatch({type:"SET_SIGN_IN_SESSION",value:s}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Qo(a,i)}};case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:kc(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:dt(an(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new y({name:Ie.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})})).apply(this,arguments)}function Qo(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>new le(`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`)}}function Le(e){return e===qt.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===qt.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function kc(e){return e?JSON.parse(e).map(n=>n.includes(Ht)?n.replace(Ht,""):n):[]}function Lc(e){if(!e)return{};const t={};return Object.entries(e).forEach(([n,o])=>{o&&(t[`${Ht}${n}`]=o)}),t}function sn(){return sn=d(function*(e,t,n,o,r,i,s,a){const c=a?.userAttributes,u=a?.friendlyDeviceName;switch(t){case"SMS_MFA":return function Pc(e){return Gt.apply(this,arguments)}({challengeResponse:o,clientMetadata:s,session:n,username:e,config:r});case"SELECT_MFA_TYPE":return function wc(e){return jt.apply(this,arguments)}({challengeResponse:o,clientMetadata:s,session:n,username:e,config:r});case"MFA_SETUP":return function Tc(e){return $t.apply(this,arguments)}({challengeResponse:o,clientMetadata:s,session:n,username:e,deviceName:u,config:r});case"NEW_PASSWORD_REQUIRED":return function Uc(e){return Jt.apply(this,arguments)}({challengeResponse:o,clientMetadata:s,session:n,username:e,requiredAttributes:c,config:r});case"CUSTOM_CHALLENGE":return Be(Rc,[{challengeResponse:o,clientMetadata:s,session:n,username:e,config:r,tokenOrchestrator:i}],e,i);case"SOFTWARE_TOKEN_MFA":return function Nc(e){return Yt.apply(this,arguments)}({challengeResponse:o,clientMetadata:s,session:n,username:e,config:r})}throw new y({name:Ie.SignInException,message:`An error occurred during the sign in process. \n\t\t${t} challengeName returned by the underlying service was not addressed.`})}),sn.apply(this,arguments)}function Bc(e){let t="SMS_MFA";return"TOTP"===e&&(t="SOFTWARE_TOKEN_MFA"),t}function er(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":void 0}function dt(e){if(e)return e.map(er).filter(Boolean)}function an(e){return e?JSON.parse(e):[]}function tr(){return cn.apply(this,arguments)}function cn(){return(cn=d(function*(){let e;try{e=yield ue()}catch{}if(e&&e.userId&&e.username)throw new y({name:hs,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})})).apply(this,arguments)}function Ke(e,t,n){return un.apply(this,arguments)}function un(){return(un=d(function*(e,t,n){if(!t)return;const o=e.split("_")[1]||"",r=yield ct(o),i=t?.DeviceKey,s=t?.DeviceGroupKey;try{yield r.generateHashDevice(s??"",i??"")}catch{return}const a={Salt:Oe.convert(_e(r.getSaltToHashDevices())),PasswordVerifier:Oe.convert(_e(r.getVerifierDevices()))},c=r.getRandomPassword();try{return yield os({region:S(e)},{AccessToken:n,DeviceKey:t?.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:i,deviceGroupKey:s,randomPassword:c}}catch{return}})).apply(this,arguments)}function Be(e,t,n,o){return dn.apply(this,arguments)}function dn(){return(dn=d(function*(e,t,n,o){try{return yield e(...t)}catch(r){if(r instanceof y&&"ResourceNotFoundException"===r.name&&r.message.includes("Device does not exist."))return yield o.clearDeviceMetadata(n),yield e(...t);throw r}})).apply(this,arguments)}function lt(e){const{dispatch:t}=ce;t({type:"SET_USERNAME",value:e})}function ft(e){return ce.getState().username??e}function fe(e){return ln.apply(this,arguments)}function ln(){return(ln=d(function*(e){if(!e.AccessToken)throw new J({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"});{const t=X(e.AccessToken),n=1e3*(t.payload.iat||0),o=(new Date).getTime(),r=n>0?n-o:0;let i,s,a;e.RefreshToken&&(s=e.RefreshToken),e.IdToken&&(i=X(e.IdToken)),e?.NewDeviceMetadata&&(a=e.NewDeviceMetadata);const c={accessToken:t,idToken:i,refreshToken:s,clockDrift:r,deviceMetadata:a,username:e.username};e?.signInDetails&&(c.signInDetails=e.signInDetails),yield L.setTokens({tokens:c})}})).apply(this,arguments)}function fn(){return(fn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{username:n,password:o,options:r}=e,i={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},s=r?.clientMetadata;U(!!n,E.EmptySignInUsername),U(!o,E.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:l}=yield Be(Dc,[n,s,t,L],n,L),f=ft(n);return Fe({signInSession:l,username:f,challengeName:a,signInDetails:i}),u?(re(),yield fe({username:f,...u,NewDeviceMetadata:yield Ke(t.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:i}),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ke({challengeName:a,challengeParameters:c})}catch(a){re(),se(a);const c=Le(a.name);if(c)return c;throw a}})).apply(this,arguments)}function hn(){return hn=d(function*(e){const{username:t,password:n,options:o}=e,r={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},i=I.getConfig().Auth?.Cognito;m(i);const s=o?.clientMetadata;U(!!t,E.EmptySignInUsername),U(!!n,E.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:l}=yield function Oc(e,t,n,o,r){return en.apply(this,arguments)}(t,n,s,i,L),f=ft(t);return Fe({signInSession:l,username:f,challengeName:a,signInDetails:r}),u?(yield fe({username:f,...u,NewDeviceMetadata:yield Ke(i.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:r}),re(),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ke({challengeName:a,challengeParameters:c})}catch(a){re(),se(a);const c=Le(a.name);if(c)return c;throw a}}),hn.apply(this,arguments)}function pn(){return pn=d(function*(e){const{username:t,password:n}=e,o=I.getConfig().Auth?.Cognito,r={loginId:t,authFlowType:"USER_SRP_AUTH"};m(o);const i=e.options?.clientMetadata;U(!!t,E.EmptySignInUsername),U(!!n,E.EmptySignInPassword);try{const{ChallengeName:s,ChallengeParameters:a,AuthenticationResult:c,Session:u}=yield function Mc(e,t,n,o,r){return Zt.apply(this,arguments)}(t,n,i,o,L),l=ft(t);return Fe({signInSession:u,username:l,challengeName:s,signInDetails:r}),c?(re(),yield fe({username:l,...c,NewDeviceMetadata:yield Ke(o.userPoolId,c.NewDeviceMetadata,c.AccessToken),signInDetails:r}),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ke({challengeName:s,challengeParameters:a})}catch(s){re(),se(s);const a=Le(s.name);if(a)return a;throw s}}),pn.apply(this,arguments)}function gn(){return(gn=d(function*(e){const{username:t,password:n,options:o}=e,r=I.getConfig().Auth?.Cognito,i={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};m(r);const s=o?.clientMetadata;U(!!t,E.EmptySignInUsername),U(!!n,E.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:l}=yield Be(bc,[t,n,s,r,L],t,L),f=ft(t);return Fe({signInSession:l,username:f,challengeName:a,signInDetails:i}),u?(yield fe({...u,username:f,NewDeviceMetadata:yield Ke(r.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:i}),re(),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ke({challengeName:a,challengeParameters:c})}catch(a){re(),se(a);const c=Le(a.name);if(c)return c;throw a}})).apply(this,arguments)}function mn(e){return yn.apply(this,arguments)}function yn(){return yn=d(function*(e){const t=e.options?.authFlowType;switch(yield tr(),t){case"USER_SRP_AUTH":default:return function nr(e){return pn.apply(this,arguments)}(e);case"USER_PASSWORD_AUTH":return function Hc(e){return gn.apply(this,arguments)}(e);case"CUSTOM_WITHOUT_SRP":return function Vc(e){return fn.apply(this,arguments)}(e);case"CUSTOM_WITH_SRP":return function qc(e){return hn.apply(this,arguments)}(e)}}),yn.apply(this,arguments)}const or=function(){var e=d(function*(){throw new y({name:Mo,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})});return function(){return e.apply(this,arguments)}}();let En=or;function In(e){En=e}function ve(){En=or}const rr=18e4;function ir(e,t){let n;return function(o){n||e(...o),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}const jc=ir(function $c(e,t,n){const o=Date.now(),r=setInterval(d(function*(){if(Date.now()-o>rr)return clearInterval(r),xe(!1),n(new y({name:Mo,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),void ve();try{const a=yield mn(e);if("CONFIRM_SIGN_UP"!==a.nextStep.signInStep)return t(a),clearInterval(r),xe(!1),void ve()}catch(a){clearInterval(r),xe(!1),n(a),ve()}}),5e3)},300),Gc=ir(function Xc(e,t,n){return Sn.apply(this,arguments)},300);let ar,sr=!1;function cr(e){ar=e}function We(){return sr}function xe(e){!1===e&&cr(void 0),sr=e}function ht(e){return!!e.UserConfirmed}function Sn(){return(Sn=d(function*(e,t,n){try{t(yield mn(e)),ve()}catch(o){n(o),ve()}})).apply(this,arguments)}function ur(e){return d(function*(){return new Promise(function(){var t=d(function*(n,o){Gc([e,n,o])});return function(n,o){return t.apply(this,arguments)}}())})}const Zc=ur;function Qc(e){return Cn.apply(this,arguments)}function Cn(){return Cn=d(function*(e){const{username:t,password:n,options:o}=e,r=I.getConfig().Auth?.Cognito,i=r?.signUpVerificationMethod??"code",{clientMetadata:s,validationData:a,autoSignIn:c}=e.options??{};m(r),U(!!t,E.EmptySignUpUsername),U(!!n,E.EmptySignUpPassword);const u="boolean"!=typeof c?c:void 0,l={username:t,options:u};"CUSTOM_WITHOUT_SRP"!==u?.authFlowType&&(l.password=n),(u||!0===c)&&(cr(t),xe(!0));const f=yield Ji({region:S(r.userPoolId),userAgentValue:_(C.SignUp)},{Username:t,Password:n,UserAttributes:o?.userAttributes&&Dt(o?.userAttributes),ClientMetadata:s,ValidationData:a&&Dt(a),ClientId:r.userPoolClientId}),{UserSub:h,CodeDeliveryDetails:g}=f;if(ht(f)&&We())return In(Zc(l)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}};if(ht(f)&&!We())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!ht(f)&&We()&&"code"===i)!function zc(e){const t=He.listen("auth-internal",function(){var o=d(function*({payload:r}){"confirmSignUp"===r.event&&r.data?.isSignUpComplete&&(He.dispatch("auth-internal",{event:"autoSignIn"}),In(ur(e)),t())});return function(r){return o.apply(this,arguments)}}()),n=setTimeout(()=>{t(),xe(!1),clearTimeout(n),ve()},rr)}(l);else if(!ht(f)&&We()&&"link"===i)return In(function Jc(e){return d(function*(){return new Promise(function(){var t=d(function*(n,o){jc([e,n,o])});return function(n,o){return t.apply(this,arguments)}}())})}(l)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:g?.DeliveryMedium,destination:g?.Destination,attributeName:g?.AttributeName}},userId:h};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:g?.DeliveryMedium,destination:g?.Destination,attributeName:g?.AttributeName}},userId:h}}),Cn.apply(this,arguments)}function eu(e){return _n.apply(this,arguments)}function _n(){return(_n=d(function*(e){const t=e.username;U(!!t,E.EmptyResetPasswordUsername);const n=I.getConfig().Auth?.Cognito;m(n);const{userPoolClientId:o,userPoolId:r}=n,i=e.options?.clientMetadata,s=k({username:t,userPoolId:r,userPoolClientId:o}),c=(yield Zi({region:S(n.userPoolId),userAgentValue:_(C.ResetPassword)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:s})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:c?.DeliveryMedium,destination:c?.Destination,attributeName:c?.AttributeName}}}})).apply(this,arguments)}function tu(e){return vn.apply(this,arguments)}function vn(){return(vn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{userPoolClientId:n,userPoolId:o}=t,{username:r,newPassword:i}=e;U(!!r,E.EmptyConfirmResetPasswordUsername),U(!!i,E.EmptyConfirmResetPasswordNewPassword);const s=e.confirmationCode;U(!!s,E.EmptyConfirmResetPasswordConfirmationCode);const a=e.options?.clientMetadata,c=k({username:r,userPoolId:o,userPoolClientId:n});yield Qi({region:S(t.userPoolId),userAgentValue:_(C.ConfirmResetPassword)},{Username:r,ConfirmationCode:s,Password:i,ClientMetadata:a,ClientId:t.userPoolClientId,UserContextData:c})})).apply(this,arguments)}function nu(e){return xn.apply(this,arguments)}function xn(){return(xn=d(function*(e){const t=e.username;U(!!t,E.EmptySignUpUsername);const n=I.getConfig().Auth?.Cognito;m(n);const{userPoolClientId:o,userPoolId:r}=n,i=e.options?.clientMetadata,s=k({username:t,userPoolId:r,userPoolClientId:o}),{CodeDeliveryDetails:a}=yield es({region:S(n.userPoolId),userAgentValue:_(C.ResendSignUpCode)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:s}),{DeliveryMedium:c,AttributeName:u,Destination:l}={...a};return{destination:l,deliveryMedium:c,attributeName:u||void 0}})).apply(this,arguments)}function ou(e){return An.apply(this,arguments)}function An(){return(An=d(function*(e){const{username:t,confirmationCode:n,options:o}=e,r=I.getConfig().Auth?.Cognito;m(r);const{userPoolId:i,userPoolClientId:s}=r,a=o?.clientMetadata;U(!!t,E.EmptyConfirmSignUpUsername),U(!!n,E.EmptyConfirmSignUpCode);const c=k({username:t,userPoolId:i,userPoolClientId:s});return yield Xi({region:S(r.userPoolId),userAgentValue:_(C.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:a,ForceAliasCreation:o?.forceAliasCreation,ClientId:r.userPoolClientId,UserContextData:c}),new Promise((u,l)=>{try{const f={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!We()||!function Yc(e){return ar===e}(t))return u(f);const h=He.listen("auth-internal",({payload:g})=>{"autoSignIn"===g.event&&(u({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),xe(!1),h())});He.dispatch("auth-internal",{event:"confirmSignUp",data:f})}catch(f){l(f)}})})).apply(this,arguments)}function ru(e){return Rn.apply(this,arguments)}function Rn(){return Rn=d(function*(e){const{challengeResponse:t,options:n}=e,{username:o,challengeName:r,signInSession:i,signInDetails:s}=ce.getState(),a=I.getConfig().Auth?.Cognito;m(a);const c=n?.clientMetadata;if(U(!!t,E.EmptyChallengeResponse),!o||!r||!i)throw new y({name:Ie.SignInException,message:"\n\t\t\tAn error occurred during the sign in process. \n\t\t\t\n\t\t\tThis most likely occurred due to:\n\t\t\t1. signIn was not called before confirmSignIn.\n\t\t\t2. signIn threw an exception.\n\t\t\t3. page was refreshed during the sign in flow.\n\t\t\t",recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the page is not refreshed until the sign in process is done."});try{const{Session:u,ChallengeName:l,AuthenticationResult:f,ChallengeParameters:h}=yield function Kc(e,t,n,o,r,i,s,a){return sn.apply(this,arguments)}(o,r,i,t,a,L,c,n);return Fe({signInSession:u,username:o,challengeName:l,signInDetails:s}),f?(re(),yield fe({username:o,...f,NewDeviceMetadata:yield Ke(a.userPoolId,f.NewDeviceMetadata,f.AccessToken),signInDetails:s}),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ke({challengeName:l,challengeParameters:h})}catch(u){se(u);const l=Le(u.name);if(l)return l;throw u}}),Rn.apply(this,arguments)}const dr=(e,t)=>e.Auth.fetchAuthSession(t),$=e=>dr(I,e);function iu(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=d(function*(e){const{sms:t,totp:n}=e,o=I.getConfig().Auth?.Cognito;m(o);const{tokens:r}=yield $({forceRefresh:!1});F(r),yield ts({region:S(o.userPoolId),userAgentValue:_(C.UpdateMFAPreference)},{AccessToken:r.accessToken.toString(),SMSMfaSettings:lr(t),SoftwareTokenMfaSettings:lr(n)})})).apply(this,arguments)}function lr(e){return"DISABLED"===e?{Enabled:!1}:"PREFERRED"===e?{Enabled:!0,PreferredMfa:!0}:"ENABLED"===e?{Enabled:!0}:"NOT_PREFERRED"===e?{Enabled:!0,PreferredMfa:!1}:void 0}function su(){return wn.apply(this,arguments)}function wn(){return(wn=d(function*(){const e=I.getConfig().Auth?.Cognito;m(e);const{tokens:t}=yield $({forceRefresh:!1});F(t);const{PreferredMfaSetting:n,UserMFASettingList:o}=yield bo({region:S(e.userPoolId),userAgentValue:_(C.FetchMFAPreference)},{AccessToken:t.accessToken.toString()});return{preferred:er(n),enabled:dt(o)}})).apply(this,arguments)}function au(e){return Pn.apply(this,arguments)}function Pn(){return(Pn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{code:n,options:o}=e;U(!!n,E.EmptyVerifyTOTPSetupCode);const{tokens:r}=yield $({forceRefresh:!1});F(r),yield No({region:S(t.userPoolId),userAgentValue:_(C.VerifyTOTPSetup)},{AccessToken:r.accessToken.toString(),UserCode:n,FriendlyDeviceName:o?.friendlyDeviceName})})).apply(this,arguments)}function cu(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{oldPassword:n,newPassword:o}=e;U(!!n,E.EmptyUpdatePassword),U(!!o,E.EmptyUpdatePassword);const{tokens:r}=yield $({forceRefresh:!1});F(r),yield ns({region:S(t.userPoolId),userAgentValue:_(C.UpdatePassword)},{AccessToken:r.accessToken.toString(),PreviousPassword:n,ProposedPassword:o})})).apply(this,arguments)}function uu(){return Un.apply(this,arguments)}function Un(){return(Un=d(function*(){const e=I.getConfig().Auth?.Cognito;m(e);const{tokens:t}=yield $({forceRefresh:!1});F(t);const n=t.idToken?.payload["cognito:username"]??"",{SecretCode:o}=yield Uo({region:S(e.userPoolId),userAgentValue:_(C.SetUpTOTP)},{AccessToken:t.accessToken.toString()});if(!o)throw new y({name:_c,message:"Failed to set up TOTP."});return Qo(o,JSON.stringify(n))})).apply(this,arguments)}const fr=function(){var e=d(function*(t){const{userAttributes:n,options:o}=t,r=I.getConfig().Auth?.Cognito,i=o?.clientMetadata;m(r);const{tokens:s}=yield $({forceRefresh:!1});F(s);const{CodeDeliveryDetailsList:a}=yield cs({region:S(r.userPoolId),userAgentValue:_(C.UpdateUserAttributes)},{AccessToken:s.accessToken.toString(),ClientMetadata:i,UserAttributes:Dt(n)});return{...du(n),...lu(a)}});return function(n){return e.apply(this,arguments)}}();function du(e){const t={};return Object.keys(e)?.forEach(n=>{t[n]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}function lu(e){const t={};return e?.forEach(n=>{const{AttributeName:o,DeliveryMedium:r,Destination:i}=n;o&&(t[o]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:o,deliveryMedium:r,destination:i}}})}),t}const fu=function(){var e=d(function*(t){const{userAttribute:{attributeKey:n,value:o},options:r}=t,i=yield fr({userAttributes:{[n]:o},options:r});return Object.values(i)[0]});return function(n){return e.apply(this,arguments)}}();function hu(e){return bn.apply(this,arguments)}function bn(){return(bn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{confirmationCode:n,userAttributeKey:o}=e;U(!!n,E.EmptyConfirmUserAttributeCode);const{tokens:r}=yield $({forceRefresh:!1});F(r),yield us({region:S(t.userPoolId),userAgentValue:_(C.ConfirmUserAttribute)},{AccessToken:r.accessToken.toString(),AttributeName:o,Code:n})})).apply(this,arguments)}function gu(e){return(e.match(/.{2}/g)||[]).map(n=>String.fromCharCode(parseInt(n,16))).join("")}const hr=()=>typeof window<"u"&&typeof window.document<"u",mu={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"},pr="amplify-signin-with-hostedUI",Z="CognitoIdentityServiceProvider";class gr{constructor(t){this.keyValueStorage=t}clearOAuthInflightData(){var t=this;return d(function*(){m(t.cognitoConfig);const n=Q(Z,t.cognitoConfig.userPoolClientId);yield Promise.all([t.keyValueStorage.removeItem(n.inflightOAuth),t.keyValueStorage.removeItem(n.oauthPKCE),t.keyValueStorage.removeItem(n.oauthState)])})()}clearOAuthData(){var t=this;return d(function*(){m(t.cognitoConfig);const n=Q(Z,t.cognitoConfig.userPoolClientId);return yield t.clearOAuthInflightData(),yield t.keyValueStorage.removeItem(pr),t.keyValueStorage.removeItem(n.oauthSignIn)})()}loadOAuthState(){m(this.cognitoConfig);const t=Q(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){m(this.cognitoConfig);const n=Q(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){m(this.cognitoConfig);const t=Q(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){m(this.cognitoConfig);const n=Q(Z,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}loadOAuthInFlight(){var t=this;return d(function*(){m(t.cognitoConfig);const n=Q(Z,t.cognitoConfig.userPoolClientId);return"true"===(yield t.keyValueStorage.getItem(n.inflightOAuth))})()}storeOAuthInFlight(t){var n=this;return d(function*(){m(n.cognitoConfig);const o=Q(Z,n.cognitoConfig.userPoolClientId);return yield n.keyValueStorage.setItem(o.inflightOAuth,`${t}`)})()}loadOAuthSignIn(){var t=this;return d(function*(){m(t.cognitoConfig);const n=Q(Z,t.cognitoConfig.userPoolClientId),o=yield t.keyValueStorage.getItem(pr),[r,i]=(yield t.keyValueStorage.getItem(n.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===r||"true"===o,preferPrivateSession:"true"===i}})()}storeOAuthSignIn(t,n=!1){var o=this;return d(function*(){m(o.cognitoConfig);const r=Q(Z,o.cognitoConfig.userPoolClientId);return yield o.keyValueStorage.setItem(r.oauthSignIn,`${t},${n}`)})()}}const Q=(e,t)=>Pt(Cs)(e,t);var mr=function(e){return e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError",e}(mr||{});new de("AuthError");const yr={oauthSignInError:{message:O.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:O.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:O.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:O.EMPTY_USERNAME},invalidUsername:{message:O.INVALID_USERNAME},emptyPassword:{message:O.EMPTY_PASSWORD},emptyCode:{message:O.EMPTY_CODE},signUpError:{message:O.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:O.NO_MFA},invalidMFA:{message:O.INVALID_MFA},emptyChallengeResponse:{message:O.EMPTY_CHALLENGE},noUserSession:{message:O.NO_USER_SESSION},deviceConfig:{message:O.DEVICE_CONFIG},networkError:{message:O.NETWORK_ERROR},autoSignInError:{message:O.AUTOSIGNIN_ERROR},default:{message:O.DEFAULT_MSG}},Er=function(){var e=d(function*(t){window?.location&&(window.location.href=t.replace("http://","https://"))});return function(n){return e.apply(this,arguments)}}(),Su=e=>{const t=new Uint8Array(e);ho().getRandomValues(t);let o,n="";for(let r of t)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r%62);return{value:n,method:"S256",toCodeChallenge:()=>o||(o=function Cu(e){const t=new De;return t.update(e),function _u(e){return e.replace(/=/g,"")}(Oe.convert(t.digestSync(),{urlSafe:!0}))}(n),o)}},xu=()=>(e=>{let n="";for(let o=0;o<32;o++)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return n})();function Sr(e){const t=e?.find(Au)??e?.find(Ru),n=e?.find(wu)??e?.find(Tu);if(t)return t;throw n?Es:ms}const Au=e=>e.startsWith(String(window.location.origin+window.location.pathname)),Ru=e=>e.includes(String(window.location.hostname)),Tu=e=>e.startsWith("http://"),wu=e=>e.startsWith("https://");function Pu(e){return On.apply(this,arguments)}function On(){return On=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t),Ge(t),H.setAuthConfig(t),yield tr();let n="COGNITO";return"string"==typeof e?.provider?n=mu[e.provider]:e?.provider?.custom&&(n=e.provider.custom),function Nu(e){return Fn.apply(this,arguments)}({oauthConfig:t.loginWith.oauth,clientId:t.userPoolClientId,provider:n,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession})}),On.apply(this,arguments)}const H=new gr(ge);function Fn(){return(Fn=d(function*({oauthConfig:e,provider:t,clientId:n,customState:o,preferPrivateSession:r}){const{domain:i,redirectSignIn:s,responseType:a,scopes:c}=e,u=xu(),l=o?`${u}-${function pu(e){return e.split("").map(t=>t.charCodeAt(0).toString(16).padStart(2,"0")).join("")}(o)}`:u,{value:f,method:h,toCodeChallenge:g}=Su(128);H.storeOAuthInFlight(!0),H.storeOAuthState(l),H.storePKCE(f);const x=`https://${i}/oauth2/authorize?${Object.entries({redirect_uri:Sr(e.redirectSignIn),response_type:a,client_id:n,identity_provider:t,scope:c.join(" "),state:l,..."code"===a&&{code_challenge:g(),code_challenge_method:h}}).map(([ee,Re])=>`${encodeURIComponent(ee)}=${encodeURIComponent(Re)}`).join("&")}`,{type:R,error:T,url:Y}=(yield Er(x))??{};"success"===R&&Y&&(yield _r({currentUrl:Y,clientId:n,domain:i,redirectUri:s[0],responseType:a,userAgentValue:_(C.SignInWithRedirect),preferPrivateSession:r})),"error"===R&&Vn(String(T))})).apply(this,arguments)}function kn(){return kn=d(function*({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,domain:r,preferPrivateSession:i}){const s=new le(e);let a;try{a=yield function Mu(e){return Wn.apply(this,arguments)}(s)}catch{return Ae(),void(yield H.clearOAuthInflightData())}const c=s.searchParams.get("code");if(!c)return yield H.clearOAuthData(),void Ae();const u="https://"+r+"/oauth2/token",l=yield H.loadPKCE(),f={grant_type:"authorization_code",code:c,client_id:n,redirect_uri:o,...l?{code_verifier:l}:{}},h=Object.entries(f).map(([Re,Qn])=>`${encodeURIComponent(Re)}=${encodeURIComponent(Qn)}`).join("&"),{access_token:g,refresh_token:v,id_token:x,error:R,token_type:T,expires_in:Y}=yield(yield fetch(u,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[ro]:t},body:h})).json();R&&(Ae(),Vn(R)),yield H.clearOAuthInflightData();const ee=(g&&X(g).payload.username)??"username";return yield fe({username:ee,AccessToken:g,IdToken:x,RefreshToken:v,TokenType:T,ExpiresIn:Y}),Cr({redirectUri:o,state:a,preferPrivateSession:i})}),kn.apply(this,arguments)}function Ln(){return(Ln=d(function*({currentUrl:e,redirectUri:t,preferPrivateSession:n}){const o=new le(e),{id_token:r,access_token:i,state:s,token_type:a,expires_in:c}=(o.hash??"#").substring(1).split("&").map(l=>l.split("=")).reduce((l,[f,h])=>({...l,[f]:h}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0});if(!i)return yield H.clearOAuthData(),void Ae();try{vr(s)}catch{return void Ae()}const u=(i&&X(i).payload.username)??"username";return yield fe({username:u,AccessToken:i,IdToken:r,TokenType:a,ExpiresIn:c}),Cr({redirectUri:t,state:s,preferPrivateSession:n})})).apply(this,arguments)}function Cr(e){return Kn.apply(this,arguments)}function Kn(){return(Kn=d(function*({redirectUri:e,state:t,preferPrivateSession:n}){yield H.clearOAuthData(),yield H.storeOAuthSignIn(!0,n),function Fu(e){return/-/.test(e)}(t)&&V.dispatch("auth",{event:"customOAuthState",data:gu(ku(t))},"Auth",W),V.dispatch("auth",{event:"signInWithRedirect"},"Auth",W),V.dispatch("auth",{event:"signedIn",data:yield ue()},"Auth",W),function Ou(e){typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState({},"",e)}(e),Ae()})).apply(this,arguments)}function _r(e){return Bn.apply(this,arguments)}function Bn(){return Bn=d(function*({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,responseType:r,domain:i,preferPrivateSession:s}){try{const a=new le(e),c=a.searchParams.get("error"),u=a.searchParams.get("error_description");return c&&Vn(u),"code"===r?yield function Uu(e){return kn.apply(this,arguments)}({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:o,domain:i,preferPrivateSession:s}):yield function bu(e){return Ln.apply(this,arguments)}({currentUrl:e,redirectUri:o,preferPrivateSession:s})}catch(a){throw a}}),Bn.apply(this,arguments)}function Wn(){return(Wn=d(function*(e){const t=e.searchParams.get("state");return vr(t),t})).apply(this,arguments)}function vr(e){let t;if(H.loadOAuthState().then(n=>{t=n}),t&&e&&t!==e)throw new y({name:mr.OAuthSignInError,message:"An error occurred while validating the state",recoverySuggestion:"Try to initiate an OAuth flow from Amplify"})}function Vn(e){throw V.dispatch("auth",{event:"signInWithRedirect_failure"},"Auth",W),new y({message:e??"",name:Ie.OAuthSignInError,recoverySuggestion:yr.oauthSignInError.log})}function xr(){return qn.apply(this,arguments)}function qn(){return(qn=d(function*(){const e=I.getConfig().Auth?.Cognito;try{m(e),H.setAuthConfig(e)}catch{return}if(yield H.loadOAuthInFlight()){try{Ge(e)}catch{return}try{const t=window.location.href,{loginWith:n,userPoolClientId:o}=e,{domain:r,redirectSignIn:i,responseType:s}=n.oauth;_r({currentUrl:t,clientId:o,domain:r,redirectUri:i[0],responseType:s,userAgentValue:_(C.SignInWithRedirect)})}catch{}}})).apply(this,arguments)}hr()&&function Du(){xr(),V.listen("core",e=>{"configure"===e.payload.event&&xr()})}();let Hn=[];const Ae=()=>{for(const e of Hn)e();Hn=[]};function ku(e){return e.split("-").splice(1).join("-")}hr()&&Ee.setWaitForInflightOAuth(()=>new Promise(function(){var e=d(function*(t,n){(yield H.loadOAuthInFlight())?Hn.push(t):t()});return function(t,n){return e.apply(this,arguments)}}()));const Lu=function(){var e=d(function*(t){const n=t.getConfig().Auth?.Cognito;m(n);const{tokens:o}=yield dr(t,{forceRefresh:!1});F(o);const{UserAttributes:r}=yield bo({region:S(n.userPoolId),userAgentValue:_(C.FetchUserAttributes)},{AccessToken:o.accessToken.toString()});return function ta(e){const t={};return e?.forEach(n=>{n.Name&&(t[n.Name]=n.Value)}),t}(r)});return function(n){return e.apply(this,arguments)}}(),Ku=()=>Lu(I);function Ar(){return I.Auth.clearCredentials()}const Bu=function(){var e=d(function*(t){yield t.clearOAuthData(),L.clearTokens(),yield Ar(),V.dispatch("auth",{event:"signedOut"},"Auth",W)});return function(n){return e.apply(this,arguments)}}(),Wu=function(){var e=d(function*(t,n=!1){Ge(t);const{loginWith:o,userPoolClientId:r}=t,{domain:i,redirectSignOut:s}=o.oauth,a=Sr(s),c=`https://${i}/logout?${Object.entries({client_id:r,logout_uri:encodeURIComponent(a)}).map(([u,l])=>`${u}=${l}`).join("&")}`;return Er(c)});return function(n){return e.apply(this,arguments)}}(),Vu=function(){var e=d(function*(t,n){const{isOAuthSignIn:o}=yield n.loadOAuthSignIn();if(yield Bu(n),o)return Wu(t)});return function(n,o){return e.apply(this,arguments)}}(),Rr=new de("Auth");function Tr(e){return zn.apply(this,arguments)}function zn(){return zn=d(function*(e){const t=I.getConfig().Auth?.Cognito;let n;m(t),e?.global?yield function Hu(e){return jn.apply(this,arguments)}(t):yield function qu(e){return $n.apply(this,arguments)}(t);try{Ge(t),n=!0}catch{n=!1}if(n){const o=new gr(ge);o.setAuthConfig(t);const{type:r}=(yield Vu(t,o))??{};if("error"===r)throw new y({name:Is,message:"An error occurred when attempting to log out from OAuth provider."})}else L.clearTokens(),yield Ar(),V.dispatch("auth",{event:"signedOut"},"Auth",W)}),zn.apply(this,arguments)}function $n(){return($n=d(function*(e){try{const t=yield L.getTokenStore().loadTokens();Do(t),zu(t.accessToken)&&(yield Yi({region:S(e.userPoolId),userAgentValue:_(C.SignOut)},{ClientId:e.userPoolClientId,Token:t.refreshToken}))}catch{Rr.debug("Client signOut error caught but will proceed with token removal")}})).apply(this,arguments)}function jn(){return(jn=d(function*(e){try{const t=yield L.getTokenStore().loadTokens();F(t),yield as({region:S(e.userPoolId),userAgentValue:_(C.SignOut)},{AccessToken:t.accessToken.toString()})}catch{Rr.debug("Global signOut error caught but will proceed with token removal")}})).apply(this,arguments)}const zu=e=>!!e?.payload?.origin_jti,$u=function(){var e=d(function*(t){const{userAttributeKey:n,options:o}=t,r=I.getConfig().Auth?.Cognito,i=o?.clientMetadata;m(r);const{tokens:s}=yield $({forceRefresh:!1});F(s);const{CodeDeliveryDetails:a}=yield ss({region:S(r.userPoolId),userAgentValue:_(C.SendUserAttributeVerificationCode)},{AccessToken:s.accessToken.toString(),ClientMetadata:i,AttributeName:n}),{DeliveryMedium:c,AttributeName:u,Destination:l}={...a};return{destination:l,deliveryMedium:c,attributeName:u}});return function(n){return e.apply(this,arguments)}}();function ju(e){return Gn.apply(this,arguments)}function Gn(){return(Gn=d(function*(e){const t=I.getConfig().Auth?.Cognito;m(t);const{userAttributeKeys:n}=e,{tokens:o}=yield $({forceRefresh:!1});F(o),yield fs({region:S(t.userPoolId),userAgentValue:_(C.DeleteUserAttributes)},{AccessToken:o.accessToken.toString(),UserAttributeNames:n})})).apply(this,arguments)}function Gu(){return Yn.apply(this,arguments)}function Yn(){return(Yn=d(function*(){const e=I.getConfig().Auth?.Cognito;m(e);const{tokens:t}=yield $();F(t),yield is({region:S(e.userPoolId),userAgentValue:_(C.DeleteUser)},{AccessToken:t.accessToken.toString()}),yield L.clearDeviceMetadata(),yield Tr()})).apply(this,arguments)}function Yu(){return Jn.apply(this,arguments)}function Jn(){return(Jn=d(function*(){const e=I.getConfig().Auth?.Cognito;m(e);const{tokens:t}=yield $();F(t);const n=yield L?.getDeviceMetadata();nt(n),yield ds({region:S(e.userPoolId),userAgentValue:_(C.RememberDevice)},{AccessToken:t.accessToken.toString(),DeviceKey:n.deviceKey,DeviceRememberedStatus:"remembered"})})).apply(this,arguments)}function Ju(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=d(function*(e){const{device:{id:t}={id:void 0}}=e??{},n=I.getConfig().Auth?.Cognito;m(n);const{tokens:o}=yield $();F(o);const r=yield L.getDeviceMetadata(),i=r?.deviceKey;t||nt(r),yield rs({region:S(n.userPoolId),userAgentValue:_(C.ForgetDevice)},{AccessToken:o.accessToken.toString(),DeviceKey:t??i}),(!t||t===i)&&(yield L.clearDeviceMetadata())})).apply(this,arguments)}const Xu=60;function Zu(){return Zn.apply(this,arguments)}function Zn(){return(Zn=d(function*(){const e=I.getConfig().Auth?.Cognito;m(e);const{tokens:t}=yield $();F(t);const n=yield ls({region:S(e.userPoolId),userAgentValue:_(C.FetchDevices)},{AccessToken:t.accessToken.toString(),Limit:Xu});return Qu(n.Devices??[])})).apply(this,arguments)}const Qu=function(){var e=d(function*(t){return t.map(({DeviceKey:n="",DeviceAttributes:o=[],DeviceCreateDate:r,DeviceLastModifiedDate:i,DeviceLastAuthenticatedDate:s})=>({id:n,attributes:o.reduce((c,{Name:u,Value:l})=>(u&&l&&(c[u]=l),c),{}),createDate:r?new Date(1e3*r):void 0,lastModifiedDate:i?new Date(1e3*i):void 0,lastAuthenticatedDate:s?new Date(1e3*s):void 0}))});return function(n){return e.apply(this,arguments)}}();let ed=(()=>{class e{constructor(n){this.auth=n,Zs.configure({Auth:{Cognito:Qs.cognito}}),this.authenticationSubject=new qe.X(!1)}signUp(n){return this.auth.signUp({username:n.email,password:n.password,options:{userAttributes:{name:n.name}}})}confirmSignUp(n){return this.auth.confirmSignUp({username:n.email,confirmationCode:n.code})}signIn(n){return this.auth.signIn({username:n.email,password:n.password})}signOut(){return this.auth.signOut()}isAuthenticated(){return this.authenticationSubject.value}getUser(){return this.auth.getCurrentUser()}static#e=this.\u0275fac=function(o){return new(o||e)(pe.LFG(td))};static#t=this.\u0275prov=pe.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const td=new pe.OlP("AWS_AMPLIFY_AUTH",{factory:()=>he,providedIn:"root"})},6208:(Or,pt,z)=>{z.d(pt,{m:()=>gt});var he=z(3651),pe=z(799),qe=z(6814),we=z(6223),d=z(3307),Pe=z(5879);let gt=(()=>{class B{static#e=this.\u0275fac=function(mt){return new(mt||B)};static#t=this.\u0275mod=Pe.oAB({type:B});static#n=this.\u0275inj=Pe.cJS({imports:[qe.ez,he.U8,we.UX,pe.Cl,d.M,qe.ez,he.U8,we.UX,pe.Cl,d.M]})}return B})()}}]);